/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var zn=Object.create;var Ye=Object.defineProperty;var Yn=Object.getOwnPropertyDescriptor;var qn=Object.getOwnPropertyNames;var jn=Object.getPrototypeOf,Qn=Object.prototype.hasOwnProperty;var x=(s,e)=>()=>(e||s((e={exports:{}}).exports,e),e.exports),Xn=(s,e)=>{for(var t in e)Ye(s,t,{get:e[t],enumerable:!0})},Ls=(s,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of qn(e))!Qn.call(s,n)&&n!==t&&Ye(s,n,{get:()=>e[n],enumerable:!(i=Yn(e,n))||i.enumerable});return s};var V=(s,e,t)=>(t=s!=null?zn(jn(s)):{},Ls(e||!s||!s.__esModule?Ye(t,"default",{value:s,enumerable:!0}):t,s)),Zn=s=>Ls(Ye({},"__esModule",{value:!0}),s);var Oe=x((Nc,Gs)=>{"use strict";var tr=require("path"),ae="\\\\/",$s=`[^${ae}]`,ce="\\.",sr="\\+",ir="\\?",Je="\\/",nr="(?=.)",ks="[^/]",Nt=`(?:${Je}|$)`,Ms=`(?:^|${Je})`,Ht=`${ce}{1,2}${Nt}`,rr=`(?!${ce})`,ar=`(?!${Ms}${Ht})`,or=`(?!${ce}{0,1}${Nt})`,cr=`(?!${Ht})`,lr=`[^.${Je}]`,ur=`${ks}*?`,Bs={DOT_LITERAL:ce,PLUS_LITERAL:sr,QMARK_LITERAL:ir,SLASH_LITERAL:Je,ONE_CHAR:nr,QMARK:ks,END_ANCHOR:Nt,DOTS_SLASH:Ht,NO_DOT:rr,NO_DOTS:ar,NO_DOT_SLASH:or,NO_DOTS_SLASH:cr,QMARK_NO_DOT:lr,STAR:ur,START_ANCHOR:Ms},hr={...Bs,SLASH_LITERAL:`[${ae}]`,QMARK:$s,STAR:`${$s}*?`,DOTS_SLASH:`${ce}{1,2}(?:[${ae}]|$)`,NO_DOT:`(?!${ce})`,NO_DOTS:`(?!(?:^|[${ae}])${ce}{1,2}(?:[${ae}]|$))`,NO_DOT_SLASH:`(?!${ce}{0,1}(?:[${ae}]|$))`,NO_DOTS_SLASH:`(?!${ce}{1,2}(?:[${ae}]|$))`,QMARK_NO_DOT:`[^.${ae}]`,START_ANCHOR:`(?:^|[${ae}])`,END_ANCHOR:`(?:[${ae}]|$)`},fr={alnum:"a-zA-Z0-9",alpha:"a-zA-Z",ascii:"\\x00-\\x7F",blank:" \\t",cntrl:"\\x00-\\x1F\\x7F",digit:"0-9",graph:"\\x21-\\x7E",lower:"a-z",print:"\\x20-\\x7E ",punct:"\\-!\"#$%&'()\\*+,./:;<=>?@[\\]^_`{|}~",space:" \\t\\r\\n\\v\\f",upper:"A-Z",word:"A-Za-z0-9_",xdigit:"A-Fa-f0-9"};Gs.exports={MAX_LENGTH:1024*64,POSIX_REGEX_SOURCE:fr,REGEX_BACKSLASH:/\\(?![*+?^${}(|)[\]])/g,REGEX_NON_SPECIAL_CHARS:/^[^@![\].,$*+?^{}()|\\/]+/,REGEX_SPECIAL_CHARS:/[-*+?.^${}(|)[\]]/,REGEX_SPECIAL_CHARS_BACKREF:/(\\?)((\W)(\3*))/g,REGEX_SPECIAL_CHARS_GLOBAL:/([-*+?.^${}(|)[\]])/g,REGEX_REMOVE_BACKSLASH:/(?:\[.*?[^\\]\]|\\(?=.))/g,REPLACEMENTS:{"***":"*","**/**":"**","**/**/**":"**"},CHAR_0:48,CHAR_9:57,CHAR_UPPERCASE_A:65,CHAR_LOWERCASE_A:97,CHAR_UPPERCASE_Z:90,CHAR_LOWERCASE_Z:122,CHAR_LEFT_PARENTHESES:40,CHAR_RIGHT_PARENTHESES:41,CHAR_ASTERISK:42,CHAR_AMPERSAND:38,CHAR_AT:64,CHAR_BACKWARD_SLASH:92,CHAR_CARRIAGE_RETURN:13,CHAR_CIRCUMFLEX_ACCENT:94,CHAR_COLON:58,CHAR_COMMA:44,CHAR_DOT:46,CHAR_DOUBLE_QUOTE:34,CHAR_EQUAL:61,CHAR_EXCLAMATION_MARK:33,CHAR_FORM_FEED:12,CHAR_FORWARD_SLASH:47,CHAR_GRAVE_ACCENT:96,CHAR_HASH:35,CHAR_HYPHEN_MINUS:45,CHAR_LEFT_ANGLE_BRACKET:60,CHAR_LEFT_CURLY_BRACE:123,CHAR_LEFT_SQUARE_BRACKET:91,CHAR_LINE_FEED:10,CHAR_NO_BREAK_SPACE:160,CHAR_PERCENT:37,CHAR_PLUS:43,CHAR_QUESTION_MARK:63,CHAR_RIGHT_ANGLE_BRACKET:62,CHAR_RIGHT_CURLY_BRACE:125,CHAR_RIGHT_SQUARE_BRACKET:93,CHAR_SEMICOLON:59,CHAR_SINGLE_QUOTE:39,CHAR_SPACE:32,CHAR_TAB:9,CHAR_UNDERSCORE:95,CHAR_VERTICAL_LINE:124,CHAR_ZERO_WIDTH_NOBREAK_SPACE:65279,SEP:tr.sep,extglobChars(s){return{"!":{type:"negate",open:"(?:(?!(?:",close:`))${s.STAR})`},"?":{type:"qmark",open:"(?:",close:")?"},"+":{type:"plus",open:"(?:",close:")+"},"*":{type:"star",open:"(?:",close:")*"},"@":{type:"at",open:"(?:",close:")"}}},globChars(s){return s===!0?hr:Bs}}});var et=x(X=>{"use strict";var dr=require("path"),pr=process.platform==="win32",{REGEX_BACKSLASH:gr,REGEX_REMOVE_BACKSLASH:mr,REGEX_SPECIAL_CHARS:yr,REGEX_SPECIAL_CHARS_GLOBAL:Sr}=Oe();X.isObject=s=>s!==null&&typeof s=="object"&&!Array.isArray(s);X.hasRegexChars=s=>yr.test(s);X.isRegexChar=s=>s.length===1&&X.hasRegexChars(s);X.escapeRegex=s=>s.replace(Sr,"\\$1");X.toPosixSlashes=s=>s.replace(gr,"/");X.removeBackslashes=s=>s.replace(mr,e=>e==="\\"?"":e);X.supportsLookbehinds=()=>{let s=process.version.slice(1).split(".").map(Number);return s.length===3&&s[0]>=9||s[0]===8&&s[1]>=10};X.isWindows=s=>s&&typeof s.windows=="boolean"?s.windows:pr===!0||dr.sep==="\\";X.escapeLast=(s,e,t)=>{let i=s.lastIndexOf(e,t);return i===-1?s:s[i-1]==="\\"?X.escapeLast(s,e,i-1):`${s.slice(0,i)}\\${s.slice(i)}`};X.removePrefix=(s,e={})=>{let t=s;return t.startsWith("./")&&(t=t.slice(2),e.prefix="./"),t};X.wrapOutput=(s,e={},t={})=>{let i=t.contains?"":"^",n=t.contains?"":"$",r=`${i}(?:${s})${n}`;return e.negated===!0&&(r=`(?:^(?!${r}).*$)`),r}});var js=x((Ic,qs)=>{"use strict";var Ws=et(),{CHAR_ASTERISK:It,CHAR_AT:Er,CHAR_BACKWARD_SLASH:Ne,CHAR_COMMA:_r,CHAR_DOT:Dt,CHAR_EXCLAMATION_MARK:Ft,CHAR_FORWARD_SLASH:Ys,CHAR_LEFT_CURLY_BRACE:$t,CHAR_LEFT_PARENTHESES:kt,CHAR_LEFT_SQUARE_BRACKET:wr,CHAR_PLUS:vr,CHAR_QUESTION_MARK:Ks,CHAR_RIGHT_CURLY_BRACE:Rr,CHAR_RIGHT_PARENTHESES:Us,CHAR_RIGHT_SQUARE_BRACKET:Cr}=Oe(),Vs=s=>s===Ys||s===Ne,zs=s=>{s.isPrefix!==!0&&(s.depth=s.isGlobstar?1/0:1)},Ar=(s,e)=>{let t=e||{},i=s.length-1,n=t.parts===!0||t.scanToEnd===!0,r=[],a=[],o=[],c=s,l=-1,h=0,f=0,u=!1,S=!1,m=!1,_=!1,P=!1,D=!1,j=!1,F=!1,ie=!1,U=!1,he=0,z,v,b={value:"",depth:0,isGlob:!1},K=()=>l>=i,g=()=>c.charCodeAt(l+1),H=()=>(z=v,c.charCodeAt(++l));for(;l<i;){v=H();let Y;if(v===Ne){j=b.backslashes=!0,v=H(),v===$t&&(D=!0);continue}if(D===!0||v===$t){for(he++;K()!==!0&&(v=H());){if(v===Ne){j=b.backslashes=!0,H();continue}if(v===$t){he++;continue}if(D!==!0&&v===Dt&&(v=H())===Dt){if(u=b.isBrace=!0,m=b.isGlob=!0,U=!0,n===!0)continue;break}if(D!==!0&&v===_r){if(u=b.isBrace=!0,m=b.isGlob=!0,U=!0,n===!0)continue;break}if(v===Rr&&(he--,he===0)){D=!1,u=b.isBrace=!0,U=!0;break}}if(n===!0)continue;break}if(v===Ys){if(r.push(l),a.push(b),b={value:"",depth:0,isGlob:!1},U===!0)continue;if(z===Dt&&l===h+1){h+=2;continue}f=l+1;continue}if(t.noext!==!0&&(v===vr||v===Er||v===It||v===Ks||v===Ft)===!0&&g()===kt){if(m=b.isGlob=!0,_=b.isExtglob=!0,U=!0,v===Ft&&l===h&&(ie=!0),n===!0){for(;K()!==!0&&(v=H());){if(v===Ne){j=b.backslashes=!0,v=H();continue}if(v===Us){m=b.isGlob=!0,U=!0;break}}continue}break}if(v===It){if(z===It&&(P=b.isGlobstar=!0),m=b.isGlob=!0,U=!0,n===!0)continue;break}if(v===Ks){if(m=b.isGlob=!0,U=!0,n===!0)continue;break}if(v===wr){for(;K()!==!0&&(Y=H());){if(Y===Ne){j=b.backslashes=!0,H();continue}if(Y===Cr){S=b.isBracket=!0,m=b.isGlob=!0,U=!0;break}}if(n===!0)continue;break}if(t.nonegate!==!0&&v===Ft&&l===h){F=b.negated=!0,h++;continue}if(t.noparen!==!0&&v===kt){if(m=b.isGlob=!0,n===!0){for(;K()!==!0&&(v=H());){if(v===kt){j=b.backslashes=!0,v=H();continue}if(v===Us){U=!0;break}}continue}break}if(m===!0){if(U=!0,n===!0)continue;break}}t.noext===!0&&(_=!1,m=!1);let L=c,fe="",d="";h>0&&(fe=c.slice(0,h),c=c.slice(h),f-=h),L&&m===!0&&f>0?(L=c.slice(0,f),d=c.slice(f)):m===!0?(L="",d=c):L=c,L&&L!==""&&L!=="/"&&L!==c&&Vs(L.charCodeAt(L.length-1))&&(L=L.slice(0,-1)),t.unescape===!0&&(d&&(d=Ws.removeBackslashes(d)),L&&j===!0&&(L=Ws.removeBackslashes(L)));let p={prefix:fe,input:s,start:h,base:L,glob:d,isBrace:u,isBracket:S,isGlob:m,isExtglob:_,isGlobstar:P,negated:F,negatedExtglob:ie};if(t.tokens===!0&&(p.maxDepth=0,Vs(v)||a.push(b),p.tokens=a),t.parts===!0||t.tokens===!0){let Y;for(let A=0;A<r.length;A++){let ne=Y?Y+1:h,re=r[A],Z=s.slice(ne,re);t.tokens&&(A===0&&h!==0?(a[A].isPrefix=!0,a[A].value=fe):a[A].value=Z,zs(a[A]),p.maxDepth+=a[A].depth),(A!==0||Z!=="")&&o.push(Z),Y=re}if(Y&&Y+1<s.length){let A=s.slice(Y+1);o.push(A),t.tokens&&(a[a.length-1].value=A,zs(a[a.length-1]),p.maxDepth+=a[a.length-1].depth)}p.slashes=r,p.parts=o}return p};qs.exports=Ar});var Zs=x((Dc,Xs)=>{"use strict";var tt=Oe(),J=et(),{MAX_LENGTH:st,POSIX_REGEX_SOURCE:br,REGEX_NON_SPECIAL_CHARS:xr,REGEX_SPECIAL_CHARS_BACKREF:Tr,REPLACEMENTS:Qs}=tt,Pr=(s,e)=>{if(typeof e.expandRange=="function")return e.expandRange(...s,e);s.sort();let t=`[${s.join("-")}]`;try{new RegExp(t)}catch{return s.map(n=>J.escapeRegex(n)).join("..")}return t},ve=(s,e)=>`Missing ${s}: "${e}" - use "\\\\${e}" to match literal characters`,Mt=(s,e)=>{if(typeof s!="string")throw new TypeError("Expected a string");s=Qs[s]||s;let t={...e},i=typeof t.maxLength=="number"?Math.min(st,t.maxLength):st,n=s.length;if(n>i)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${i}`);let r={type:"bos",value:"",output:t.prepend||""},a=[r],o=t.capture?"":"?:",c=J.isWindows(e),l=tt.globChars(c),h=tt.extglobChars(l),{DOT_LITERAL:f,PLUS_LITERAL:u,SLASH_LITERAL:S,ONE_CHAR:m,DOTS_SLASH:_,NO_DOT:P,NO_DOT_SLASH:D,NO_DOTS_SLASH:j,QMARK:F,QMARK_NO_DOT:ie,STAR:U,START_ANCHOR:he}=l,z=E=>`(${o}(?:(?!${he}${E.dot?_:f}).)*?)`,v=t.dot?"":P,b=t.dot?F:ie,K=t.bash===!0?z(t):U;t.capture&&(K=`(${K})`),typeof t.noext=="boolean"&&(t.noextglob=t.noext);let g={input:s,index:-1,start:0,dot:t.dot===!0,consumed:"",output:"",prefix:"",backtrack:!1,negated:!1,brackets:0,braces:0,parens:0,quotes:0,globstar:!1,tokens:a};s=J.removePrefix(s,g),n=s.length;let H=[],L=[],fe=[],d=r,p,Y=()=>g.index===n-1,A=g.peek=(E=1)=>s[g.index+E],ne=g.advance=()=>s[++g.index]||"",re=()=>s.slice(g.index+1),Z=(E="",O=0)=>{g.consumed+=E,g.index+=O},Ke=E=>{g.output+=E.output!=null?E.output:E.value,Z(E.value)},Un=()=>{let E=1;for(;A()==="!"&&(A(2)!=="("||A(3)==="?");)ne(),g.start++,E++;return E%2===0?!1:(g.negated=!0,g.start++,!0)},Ue=E=>{g[E]++,fe.push(E)},ge=E=>{g[E]--,fe.pop()},C=E=>{if(d.type==="globstar"){let O=g.braces>0&&(E.type==="comma"||E.type==="brace"),y=E.extglob===!0||H.length&&(E.type==="pipe"||E.type==="paren");E.type!=="slash"&&E.type!=="paren"&&!O&&!y&&(g.output=g.output.slice(0,-d.output.length),d.type="star",d.value="*",d.output=K,g.output+=d.output)}if(H.length&&E.type!=="paren"&&(H[H.length-1].inner+=E.value),(E.value||E.output)&&Ke(E),d&&d.type==="text"&&E.type==="text"){d.value+=E.value,d.output=(d.output||"")+E.value;return}E.prev=d,a.push(E),d=E},Ve=(E,O)=>{let y={...h[O],conditions:1,inner:""};y.prev=d,y.parens=g.parens,y.output=g.output;let R=(t.capture?"(":"")+y.open;Ue("parens"),C({type:E,value:O,output:g.output?"":m}),C({type:"paren",extglob:!0,value:ne(),output:R}),H.push(y)},Vn=E=>{let O=E.close+(t.capture?")":""),y;if(E.type==="negate"){let R=K;if(E.inner&&E.inner.length>1&&E.inner.includes("/")&&(R=z(t)),(R!==K||Y()||/^\)+$/.test(re()))&&(O=E.close=`)$))${R}`),E.inner.includes("*")&&(y=re())&&/^\.[^\\/.]+$/.test(y)){let I=Mt(y,{...e,fastpaths:!1}).output;O=E.close=`)${I})${R})`}E.prev.type==="bos"&&(g.negatedExtglob=!0)}C({type:"paren",extglob:!0,value:p,output:O}),ge("parens")};if(t.fastpaths!==!1&&!/(^[*!]|[/()[\]{}"])/.test(s)){let E=!1,O=s.replace(Tr,(y,R,I,q,B,Pt)=>q==="\\"?(E=!0,y):q==="?"?R?R+q+(B?F.repeat(B.length):""):Pt===0?b+(B?F.repeat(B.length):""):F.repeat(I.length):q==="."?f.repeat(I.length):q==="*"?R?R+q+(B?K:""):K:R?y:`\\${y}`);return E===!0&&(t.unescape===!0?O=O.replace(/\\/g,""):O=O.replace(/\\+/g,y=>y.length%2===0?"\\\\":y?"\\":"")),O===s&&t.contains===!0?(g.output=s,g):(g.output=J.wrapOutput(O,g,e),g)}for(;!Y();){if(p=ne(),p==="\0")continue;if(p==="\\"){let y=A();if(y==="/"&&t.bash!==!0||y==="."||y===";")continue;if(!y){p+="\\",C({type:"text",value:p});continue}let R=/^\\+/.exec(re()),I=0;if(R&&R[0].length>2&&(I=R[0].length,g.index+=I,I%2!==0&&(p+="\\")),t.unescape===!0?p=ne():p+=ne(),g.brackets===0){C({type:"text",value:p});continue}}if(g.brackets>0&&(p!=="]"||d.value==="["||d.value==="[^")){if(t.posix!==!1&&p===":"){let y=d.value.slice(1);if(y.includes("[")&&(d.posix=!0,y.includes(":"))){let R=d.value.lastIndexOf("["),I=d.value.slice(0,R),q=d.value.slice(R+2),B=br[q];if(B){d.value=I+B,g.backtrack=!0,ne(),!r.output&&a.indexOf(d)===1&&(r.output=m);continue}}}(p==="["&&A()!==":"||p==="-"&&A()==="]")&&(p=`\\${p}`),p==="]"&&(d.value==="["||d.value==="[^")&&(p=`\\${p}`),t.posix===!0&&p==="!"&&d.value==="["&&(p="^"),d.value+=p,Ke({value:p});continue}if(g.quotes===1&&p!=='"'){p=J.escapeRegex(p),d.value+=p,Ke({value:p});continue}if(p==='"'){g.quotes=g.quotes===1?0:1,t.keepQuotes===!0&&C({type:"text",value:p});continue}if(p==="("){Ue("parens"),C({type:"paren",value:p});continue}if(p===")"){if(g.parens===0&&t.strictBrackets===!0)throw new SyntaxError(ve("opening","("));let y=H[H.length-1];if(y&&g.parens===y.parens+1){Vn(H.pop());continue}C({type:"paren",value:p,output:g.parens?")":"\\)"}),ge("parens");continue}if(p==="["){if(t.nobracket===!0||!re().includes("]")){if(t.nobracket!==!0&&t.strictBrackets===!0)throw new SyntaxError(ve("closing","]"));p=`\\${p}`}else Ue("brackets");C({type:"bracket",value:p});continue}if(p==="]"){if(t.nobracket===!0||d&&d.type==="bracket"&&d.value.length===1){C({type:"text",value:p,output:`\\${p}`});continue}if(g.brackets===0){if(t.strictBrackets===!0)throw new SyntaxError(ve("opening","["));C({type:"text",value:p,output:`\\${p}`});continue}ge("brackets");let y=d.value.slice(1);if(d.posix!==!0&&y[0]==="^"&&!y.includes("/")&&(p=`/${p}`),d.value+=p,Ke({value:p}),t.literalBrackets===!1||J.hasRegexChars(y))continue;let R=J.escapeRegex(d.value);if(g.output=g.output.slice(0,-d.value.length),t.literalBrackets===!0){g.output+=R,d.value=R;continue}d.value=`(${o}${R}|${d.value})`,g.output+=d.value;continue}if(p==="{"&&t.nobrace!==!0){Ue("braces");let y={type:"brace",value:p,output:"(",outputIndex:g.output.length,tokensIndex:g.tokens.length};L.push(y),C(y);continue}if(p==="}"){let y=L[L.length-1];if(t.nobrace===!0||!y){C({type:"text",value:p,output:p});continue}let R=")";if(y.dots===!0){let I=a.slice(),q=[];for(let B=I.length-1;B>=0&&(a.pop(),I[B].type!=="brace");B--)I[B].type!=="dots"&&q.unshift(I[B].value);R=Pr(q,t),g.backtrack=!0}if(y.comma!==!0&&y.dots!==!0){let I=g.output.slice(0,y.outputIndex),q=g.tokens.slice(y.tokensIndex);y.value=y.output="\\{",p=R="\\}",g.output=I;for(let B of q)g.output+=B.output||B.value}C({type:"brace",value:p,output:R}),ge("braces"),L.pop();continue}if(p==="|"){H.length>0&&H[H.length-1].conditions++,C({type:"text",value:p});continue}if(p===","){let y=p,R=L[L.length-1];R&&fe[fe.length-1]==="braces"&&(R.comma=!0,y="|"),C({type:"comma",value:p,output:y});continue}if(p==="/"){if(d.type==="dot"&&g.index===g.start+1){g.start=g.index+1,g.consumed="",g.output="",a.pop(),d=r;continue}C({type:"slash",value:p,output:S});continue}if(p==="."){if(g.braces>0&&d.type==="dot"){d.value==="."&&(d.output=f);let y=L[L.length-1];d.type="dots",d.output+=p,d.value+=p,y.dots=!0;continue}if(g.braces+g.parens===0&&d.type!=="bos"&&d.type!=="slash"){C({type:"text",value:p,output:f});continue}C({type:"dot",value:p,output:f});continue}if(p==="?"){if(!(d&&d.value==="(")&&t.noextglob!==!0&&A()==="("&&A(2)!=="?"){Ve("qmark",p);continue}if(d&&d.type==="paren"){let R=A(),I=p;if(R==="<"&&!J.supportsLookbehinds())throw new Error("Node.js v10 or higher is required for regex lookbehinds");(d.value==="("&&!/[!=<:]/.test(R)||R==="<"&&!/<([!=]|\w+>)/.test(re()))&&(I=`\\${p}`),C({type:"text",value:p,output:I});continue}if(t.dot!==!0&&(d.type==="slash"||d.type==="bos")){C({type:"qmark",value:p,output:ie});continue}C({type:"qmark",value:p,output:F});continue}if(p==="!"){if(t.noextglob!==!0&&A()==="("&&(A(2)!=="?"||!/[!=<:]/.test(A(3)))){Ve("negate",p);continue}if(t.nonegate!==!0&&g.index===0){Un();continue}}if(p==="+"){if(t.noextglob!==!0&&A()==="("&&A(2)!=="?"){Ve("plus",p);continue}if(d&&d.value==="("||t.regex===!1){C({type:"plus",value:p,output:u});continue}if(d&&(d.type==="bracket"||d.type==="paren"||d.type==="brace")||g.parens>0){C({type:"plus",value:p});continue}C({type:"plus",value:u});continue}if(p==="@"){if(t.noextglob!==!0&&A()==="("&&A(2)!=="?"){C({type:"at",extglob:!0,value:p,output:""});continue}C({type:"text",value:p});continue}if(p!=="*"){(p==="$"||p==="^")&&(p=`\\${p}`);let y=xr.exec(re());y&&(p+=y[0],g.index+=y[0].length),C({type:"text",value:p});continue}if(d&&(d.type==="globstar"||d.star===!0)){d.type="star",d.star=!0,d.value+=p,d.output=K,g.backtrack=!0,g.globstar=!0,Z(p);continue}let E=re();if(t.noextglob!==!0&&/^\([^?]/.test(E)){Ve("star",p);continue}if(d.type==="star"){if(t.noglobstar===!0){Z(p);continue}let y=d.prev,R=y.prev,I=y.type==="slash"||y.type==="bos",q=R&&(R.type==="star"||R.type==="globstar");if(t.bash===!0&&(!I||E[0]&&E[0]!=="/")){C({type:"star",value:p,output:""});continue}let B=g.braces>0&&(y.type==="comma"||y.type==="brace"),Pt=H.length&&(y.type==="pipe"||y.type==="paren");if(!I&&y.type!=="paren"&&!B&&!Pt){C({type:"star",value:p,output:""});continue}for(;E.slice(0,3)==="/**";){let ze=s[g.index+4];if(ze&&ze!=="/")break;E=E.slice(3),Z("/**",3)}if(y.type==="bos"&&Y()){d.type="globstar",d.value+=p,d.output=z(t),g.output=d.output,g.globstar=!0,Z(p);continue}if(y.type==="slash"&&y.prev.type!=="bos"&&!q&&Y()){g.output=g.output.slice(0,-(y.output+d.output).length),y.output=`(?:${y.output}`,d.type="globstar",d.output=z(t)+(t.strictSlashes?")":"|$)"),d.value+=p,g.globstar=!0,g.output+=y.output+d.output,Z(p);continue}if(y.type==="slash"&&y.prev.type!=="bos"&&E[0]==="/"){let ze=E[1]!==void 0?"|$":"";g.output=g.output.slice(0,-(y.output+d.output).length),y.output=`(?:${y.output}`,d.type="globstar",d.output=`${z(t)}${S}|${S}${ze})`,d.value+=p,g.output+=y.output+d.output,g.globstar=!0,Z(p+ne()),C({type:"slash",value:"/",output:""});continue}if(y.type==="bos"&&E[0]==="/"){d.type="globstar",d.value+=p,d.output=`(?:^|${S}|${z(t)}${S})`,g.output=d.output,g.globstar=!0,Z(p+ne()),C({type:"slash",value:"/",output:""});continue}g.output=g.output.slice(0,-d.output.length),d.type="globstar",d.output=z(t),d.value+=p,g.output+=d.output,g.globstar=!0,Z(p);continue}let O={type:"star",value:p,output:K};if(t.bash===!0){O.output=".*?",(d.type==="bos"||d.type==="slash")&&(O.output=v+O.output),C(O);continue}if(d&&(d.type==="bracket"||d.type==="paren")&&t.regex===!0){O.output=p,C(O);continue}(g.index===g.start||d.type==="slash"||d.type==="dot")&&(d.type==="dot"?(g.output+=D,d.output+=D):t.dot===!0?(g.output+=j,d.output+=j):(g.output+=v,d.output+=v),A()!=="*"&&(g.output+=m,d.output+=m)),C(O)}for(;g.brackets>0;){if(t.strictBrackets===!0)throw new SyntaxError(ve("closing","]"));g.output=J.escapeLast(g.output,"["),ge("brackets")}for(;g.parens>0;){if(t.strictBrackets===!0)throw new SyntaxError(ve("closing",")"));g.output=J.escapeLast(g.output,"("),ge("parens")}for(;g.braces>0;){if(t.strictBrackets===!0)throw new SyntaxError(ve("closing","}"));g.output=J.escapeLast(g.output,"{"),ge("braces")}if(t.strictSlashes!==!0&&(d.type==="star"||d.type==="bracket")&&C({type:"maybe_slash",value:"",output:`${S}?`}),g.backtrack===!0){g.output="";for(let E of g.tokens)g.output+=E.output!=null?E.output:E.value,E.suffix&&(g.output+=E.suffix)}return g};Mt.fastpaths=(s,e)=>{let t={...e},i=typeof t.maxLength=="number"?Math.min(st,t.maxLength):st,n=s.length;if(n>i)throw new SyntaxError(`Input length: ${n}, exceeds maximum allowed length: ${i}`);s=Qs[s]||s;let r=J.isWindows(e),{DOT_LITERAL:a,SLASH_LITERAL:o,ONE_CHAR:c,DOTS_SLASH:l,NO_DOT:h,NO_DOTS:f,NO_DOTS_SLASH:u,STAR:S,START_ANCHOR:m}=tt.globChars(r),_=t.dot?f:h,P=t.dot?u:h,D=t.capture?"":"?:",j={negated:!1,prefix:""},F=t.bash===!0?".*?":S;t.capture&&(F=`(${F})`);let ie=v=>v.noglobstar===!0?F:`(${D}(?:(?!${m}${v.dot?l:a}).)*?)`,U=v=>{switch(v){case"*":return`${_}${c}${F}`;case".*":return`${a}${c}${F}`;case"*.*":return`${_}${F}${a}${c}${F}`;case"*/*":return`${_}${F}${o}${c}${P}${F}`;case"**":return _+ie(t);case"**/*":return`(?:${_}${ie(t)}${o})?${P}${c}${F}`;case"**/*.*":return`(?:${_}${ie(t)}${o})?${P}${F}${a}${c}${F}`;case"**/.*":return`(?:${_}${ie(t)}${o})?${a}${c}${F}`;default:{let b=/^(.*?)\.(\w+)$/.exec(v);if(!b)return;let K=U(b[1]);return K?K+a+b[2]:void 0}}},he=J.removePrefix(s,j),z=U(he);return z&&t.strictSlashes!==!0&&(z+=`${o}?`),z};Xs.exports=Mt});var ei=x((Fc,Js)=>{"use strict";var Lr=require("path"),Or=js(),Bt=Zs(),Gt=et(),Nr=Oe(),Hr=s=>s&&typeof s=="object"&&!Array.isArray(s),$=(s,e,t=!1)=>{if(Array.isArray(s)){let h=s.map(u=>$(u,e,t));return u=>{for(let S of h){let m=S(u);if(m)return m}return!1}}let i=Hr(s)&&s.tokens&&s.input;if(s===""||typeof s!="string"&&!i)throw new TypeError("Expected pattern to be a non-empty string");let n=e||{},r=Gt.isWindows(e),a=i?$.compileRe(s,e):$.makeRe(s,e,!1,!0),o=a.state;delete a.state;let c=()=>!1;if(n.ignore){let h={...e,ignore:null,onMatch:null,onResult:null};c=$(n.ignore,h,t)}let l=(h,f=!1)=>{let{isMatch:u,match:S,output:m}=$.test(h,a,e,{glob:s,posix:r}),_={glob:s,state:o,regex:a,posix:r,input:h,output:m,match:S,isMatch:u};return typeof n.onResult=="function"&&n.onResult(_),u===!1?(_.isMatch=!1,f?_:!1):c(h)?(typeof n.onIgnore=="function"&&n.onIgnore(_),_.isMatch=!1,f?_:!1):(typeof n.onMatch=="function"&&n.onMatch(_),f?_:!0)};return t&&(l.state=o),l};$.test=(s,e,t,{glob:i,posix:n}={})=>{if(typeof s!="string")throw new TypeError("Expected input to be a string");if(s==="")return{isMatch:!1,output:""};let r=t||{},a=r.format||(n?Gt.toPosixSlashes:null),o=s===i,c=o&&a?a(s):s;return o===!1&&(c=a?a(s):s,o=c===i),(o===!1||r.capture===!0)&&(r.matchBase===!0||r.basename===!0?o=$.matchBase(s,e,t,n):o=e.exec(c)),{isMatch:!!o,match:o,output:c}};$.matchBase=(s,e,t,i=Gt.isWindows(t))=>(e instanceof RegExp?e:$.makeRe(e,t)).test(Lr.basename(s));$.isMatch=(s,e,t)=>$(e,t)(s);$.parse=(s,e)=>Array.isArray(s)?s.map(t=>$.parse(t,e)):Bt(s,{...e,fastpaths:!1});$.scan=(s,e)=>Or(s,e);$.compileRe=(s,e,t=!1,i=!1)=>{if(t===!0)return s.output;let n=e||{},r=n.contains?"":"^",a=n.contains?"":"$",o=`${r}(?:${s.output})${a}`;s&&s.negated===!0&&(o=`^(?!${o}).*$`);let c=$.toRegex(o,e);return i===!0&&(c.state=s),c};$.makeRe=(s,e={},t=!1,i=!1)=>{if(!s||typeof s!="string")throw new TypeError("Expected a non-empty string");let n={negated:!1,fastpaths:!0};return e.fastpaths!==!1&&(s[0]==="."||s[0]==="*")&&(n.output=Bt.fastpaths(s,e)),n.output||(n=Bt(s,e)),$.compileRe(n,e,t,i)};$.toRegex=(s,e)=>{try{let t=e||{};return new RegExp(s,t.flags||(t.nocase?"i":""))}catch(t){if(e&&e.debug===!0)throw t;return/$^/}};$.constants=Nr;Js.exports=$});var Wt=x(($c,ti)=>{"use strict";ti.exports=ei()});var li=x((kc,ci)=>{"use strict";var Ie=require("fs"),{Readable:Ir}=require("stream"),He=require("path"),{promisify:at}=require("util"),Kt=Wt(),Dr=at(Ie.readdir),Fr=at(Ie.stat),si=at(Ie.lstat),$r=at(Ie.realpath),kr="!",ai="READDIRP_RECURSIVE_ERROR",Mr=new Set(["ENOENT","EPERM","EACCES","ELOOP",ai]),Ut="files",oi="directories",nt="files_directories",it="all",ii=[Ut,oi,nt,it],Br=s=>Mr.has(s.code),[ni,Gr]=process.versions.node.split(".").slice(0,2).map(s=>Number.parseInt(s,10)),Wr=process.platform==="win32"&&(ni>10||ni===10&&Gr>=5),ri=s=>{if(s!==void 0){if(typeof s=="function")return s;if(typeof s=="string"){let e=Kt(s.trim());return t=>e(t.basename)}if(Array.isArray(s)){let e=[],t=[];for(let i of s){let n=i.trim();n.charAt(0)===kr?t.push(Kt(n.slice(1))):e.push(Kt(n))}return t.length>0?e.length>0?i=>e.some(n=>n(i.basename))&&!t.some(n=>n(i.basename)):i=>!t.some(n=>n(i.basename)):i=>e.some(n=>n(i.basename))}}},rt=class s extends Ir{static get defaultOptions(){return{root:".",fileFilter:e=>!0,directoryFilter:e=>!0,type:Ut,lstat:!1,depth:2147483648,alwaysStat:!1}}constructor(e={}){super({objectMode:!0,autoDestroy:!0,highWaterMark:e.highWaterMark||4096});let t={...s.defaultOptions,...e},{root:i,type:n}=t;this._fileFilter=ri(t.fileFilter),this._directoryFilter=ri(t.directoryFilter);let r=t.lstat?si:Fr;Wr?this._stat=a=>r(a,{bigint:!0}):this._stat=r,this._maxDepth=t.depth,this._wantsDir=[oi,nt,it].includes(n),this._wantsFile=[Ut,nt,it].includes(n),this._wantsEverything=n===it,this._root=He.resolve(i),this._isDirent="Dirent"in Ie&&!t.alwaysStat,this._statsProp=this._isDirent?"dirent":"stats",this._rdOptions={encoding:"utf8",withFileTypes:this._isDirent},this.parents=[this._exploreDir(i,1)],this.reading=!1,this.parent=void 0}async _read(e){if(!this.reading){this.reading=!0;try{for(;!this.destroyed&&e>0;){let{path:t,depth:i,files:n=[]}=this.parent||{};if(n.length>0){let r=n.splice(0,e).map(a=>this._formatEntry(a,t));for(let a of await Promise.all(r)){if(this.destroyed)return;let o=await this._getEntryType(a);o==="directory"&&this._directoryFilter(a)?(i<=this._maxDepth&&this.parents.push(this._exploreDir(a.fullPath,i+1)),this._wantsDir&&(this.push(a),e--)):(o==="file"||this._includeAsFile(a))&&this._fileFilter(a)&&this._wantsFile&&(this.push(a),e--)}}else{let r=this.parents.pop();if(!r){this.push(null);break}if(this.parent=await r,this.destroyed)return}}}catch(t){this.destroy(t)}finally{this.reading=!1}}}async _exploreDir(e,t){let i;try{i=await Dr(e,this._rdOptions)}catch(n){this._onError(n)}return{files:i,depth:t,path:e}}async _formatEntry(e,t){let i;try{let n=this._isDirent?e.name:e,r=He.resolve(He.join(t,n));i={path:He.relative(this._root,r),fullPath:r,basename:n},i[this._statsProp]=this._isDirent?e:await this._stat(r)}catch(n){this._onError(n)}return i}_onError(e){Br(e)&&!this.destroyed?this.emit("warn",e):this.destroy(e)}async _getEntryType(e){let t=e&&e[this._statsProp];if(t){if(t.isFile())return"file";if(t.isDirectory())return"directory";if(t&&t.isSymbolicLink()){let i=e.fullPath;try{let n=await $r(i),r=await si(n);if(r.isFile())return"file";if(r.isDirectory()){let a=n.length;if(i.startsWith(n)&&i.substr(a,1)===He.sep){let o=new Error(`Circular symlink detected: "${i}" points to "${n}"`);return o.code=ai,this._onError(o)}return"directory"}}catch(n){this._onError(n)}}}}_includeAsFile(e){let t=e&&e[this._statsProp];return t&&this._wantsEverything&&!t.isDirectory()}},Re=(s,e={})=>{let t=e.entryType||e.type;if(t==="both"&&(t=nt),t&&(e.type=t),s){if(typeof s!="string")throw new TypeError("readdirp: root argument must be a string. Usage: readdirp(root, options)");if(t&&!ii.includes(t))throw new Error(`readdirp: Invalid type passed. Use one of ${ii.join(", ")}`)}else throw new Error("readdirp: root argument is required. Usage: readdirp(root, options)");return e.root=s,new rt(e)},Kr=(s,e={})=>new Promise((t,i)=>{let n=[];Re(s,e).on("data",r=>n.push(r)).on("end",()=>t(n)).on("error",r=>i(r))});Re.promise=Kr;Re.ReaddirpStream=rt;Re.default=Re;ci.exports=Re});var Vt=x((Mc,ui)=>{ui.exports=function(s,e){if(typeof s!="string")throw new TypeError("expected path to be a string");if(s==="\\"||s==="/")return"/";var t=s.length;if(t<=1)return s;var i="";if(t>4&&s[3]==="\\"){var n=s[2];(n==="?"||n===".")&&s.slice(0,2)==="\\\\"&&(s=s.slice(2),i="//")}var r=s.split(/[/\\]+/);return e!==!1&&r[r.length-1]===""&&r.pop(),i+r.join("/")}});var mi=x((pi,gi)=>{"use strict";Object.defineProperty(pi,"__esModule",{value:!0});var di=Wt(),Ur=Vt(),hi="!",Vr={returnIndex:!1},zr=s=>Array.isArray(s)?s:[s],Yr=(s,e)=>{if(typeof s=="function")return s;if(typeof s=="string"){let t=di(s,e);return i=>s===i||t(i)}return s instanceof RegExp?t=>s.test(t):t=>!1},fi=(s,e,t,i)=>{let n=Array.isArray(t),r=n?t[0]:t;if(!n&&typeof r!="string")throw new TypeError("anymatch: second argument must be a string: got "+Object.prototype.toString.call(r));let a=Ur(r,!1);for(let c=0;c<e.length;c++){let l=e[c];if(l(a))return i?-1:!1}let o=n&&[a].concat(t.slice(1));for(let c=0;c<s.length;c++){let l=s[c];if(n?l(...o):l(a))return i?c:!0}return i?-1:!1},zt=(s,e,t=Vr)=>{if(s==null)throw new TypeError("anymatch: specify first argument");let i=typeof t=="boolean"?{returnIndex:t}:t,n=i.returnIndex||!1,r=zr(s),a=r.filter(c=>typeof c=="string"&&c.charAt(0)===hi).map(c=>c.slice(1)).map(c=>di(c,i)),o=r.filter(c=>typeof c!="string"||typeof c=="string"&&c.charAt(0)!==hi).map(c=>Yr(c,i));return e==null?(c,l=!1)=>fi(o,a,c,typeof l=="boolean"?l:!1):fi(o,a,e,n)};zt.default=zt;gi.exports=zt});var Si=x((Bc,yi)=>{yi.exports=function(e){if(typeof e!="string"||e==="")return!1;for(var t;t=/(\\).|([@?!+*]\(.*\))/g.exec(e);){if(t[2])return!0;e=e.slice(t.index+t[0].length)}return!1}});var Yt=x((Gc,_i)=>{var qr=Si(),Ei={"{":"}","(":")","[":"]"},jr=function(s){if(s[0]==="!")return!0;for(var e=0,t=-2,i=-2,n=-2,r=-2,a=-2;e<s.length;){if(s[e]==="*"||s[e+1]==="?"&&/[\].+)]/.test(s[e])||i!==-1&&s[e]==="["&&s[e+1]!=="]"&&(i<e&&(i=s.indexOf("]",e)),i>e&&(a===-1||a>i||(a=s.indexOf("\\",e),a===-1||a>i)))||n!==-1&&s[e]==="{"&&s[e+1]!=="}"&&(n=s.indexOf("}",e),n>e&&(a=s.indexOf("\\",e),a===-1||a>n))||r!==-1&&s[e]==="("&&s[e+1]==="?"&&/[:!=]/.test(s[e+2])&&s[e+3]!==")"&&(r=s.indexOf(")",e),r>e&&(a=s.indexOf("\\",e),a===-1||a>r))||t!==-1&&s[e]==="("&&s[e+1]!=="|"&&(t<e&&(t=s.indexOf("|",e)),t!==-1&&s[t+1]!==")"&&(r=s.indexOf(")",t),r>t&&(a=s.indexOf("\\",t),a===-1||a>r))))return!0;if(s[e]==="\\"){var o=s[e+1];e+=2;var c=Ei[o];if(c){var l=s.indexOf(c,e);l!==-1&&(e=l+1)}if(s[e]==="!")return!0}else e++}return!1},Qr=function(s){if(s[0]==="!")return!0;for(var e=0;e<s.length;){if(/[*?{}()[\]]/.test(s[e]))return!0;if(s[e]==="\\"){var t=s[e+1];e+=2;var i=Ei[t];if(i){var n=s.indexOf(i,e);n!==-1&&(e=n+1)}if(s[e]==="!")return!0}else e++}return!1};_i.exports=function(e,t){if(typeof e!="string"||e==="")return!1;if(qr(e))return!0;var i=jr;return t&&t.strict===!1&&(i=Qr),i(e)}});var vi=x((Wc,wi)=>{"use strict";var Xr=Yt(),Zr=require("path").posix.dirname,Jr=require("os").platform()==="win32",qt="/",ea=/\\/g,ta=/[\{\[].*[\}\]]$/,sa=/(^|[^\\])([\{\[]|\([^\)]+$)/,ia=/\\([\!\*\?\|\[\]\(\)\{\}])/g;wi.exports=function(e,t){var i=Object.assign({flipBackslashes:!0},t);i.flipBackslashes&&Jr&&e.indexOf(qt)<0&&(e=e.replace(ea,qt)),ta.test(e)&&(e+=qt),e+="a";do e=Zr(e);while(Xr(e)||sa.test(e));return e.replace(ia,"$1")}});var ot=x(te=>{"use strict";te.isInteger=s=>typeof s=="number"?Number.isInteger(s):typeof s=="string"&&s.trim()!==""?Number.isInteger(Number(s)):!1;te.find=(s,e)=>s.nodes.find(t=>t.type===e);te.exceedsLimit=(s,e,t=1,i)=>i===!1||!te.isInteger(s)||!te.isInteger(e)?!1:(Number(e)-Number(s))/Number(t)>=i;te.escapeNode=(s,e=0,t)=>{let i=s.nodes[e];i&&(t&&i.type===t||i.type==="open"||i.type==="close")&&i.escaped!==!0&&(i.value="\\"+i.value,i.escaped=!0)};te.encloseBrace=s=>s.type!=="brace"?!1:s.commas>>0+s.ranges>>0===0?(s.invalid=!0,!0):!1;te.isInvalidBrace=s=>s.type!=="brace"?!1:s.invalid===!0||s.dollar?!0:s.commas>>0+s.ranges>>0===0||s.open!==!0||s.close!==!0?(s.invalid=!0,!0):!1;te.isOpenOrClose=s=>s.type==="open"||s.type==="close"?!0:s.open===!0||s.close===!0;te.reduce=s=>s.reduce((e,t)=>(t.type==="text"&&e.push(t.value),t.type==="range"&&(t.type="text"),e),[]);te.flatten=(...s)=>{let e=[],t=i=>{for(let n=0;n<i.length;n++){let r=i[n];if(Array.isArray(r)){t(r);continue}r!==void 0&&e.push(r)}return e};return t(s),e}});var ct=x((Uc,Ci)=>{"use strict";var Ri=ot();Ci.exports=(s,e={})=>{let t=(i,n={})=>{let r=e.escapeInvalid&&Ri.isInvalidBrace(n),a=i.invalid===!0&&e.escapeInvalid===!0,o="";if(i.value)return(r||a)&&Ri.isOpenOrClose(i)?"\\"+i.value:i.value;if(i.value)return i.value;if(i.nodes)for(let c of i.nodes)o+=t(c);return o};return t(s)}});var bi=x((Vc,Ai)=>{"use strict";Ai.exports=function(s){return typeof s=="number"?s-s===0:typeof s=="string"&&s.trim()!==""?Number.isFinite?Number.isFinite(+s):isFinite(+s):!1}});var Di=x((zc,Ii)=>{"use strict";var xi=bi(),ye=(s,e,t)=>{if(xi(s)===!1)throw new TypeError("toRegexRange: expected the first argument to be a number");if(e===void 0||s===e)return String(s);if(xi(e)===!1)throw new TypeError("toRegexRange: expected the second argument to be a number.");let i={relaxZeros:!0,...t};typeof i.strictZeros=="boolean"&&(i.relaxZeros=i.strictZeros===!1);let n=String(i.relaxZeros),r=String(i.shorthand),a=String(i.capture),o=String(i.wrap),c=s+":"+e+"="+n+r+a+o;if(ye.cache.hasOwnProperty(c))return ye.cache[c].result;let l=Math.min(s,e),h=Math.max(s,e);if(Math.abs(l-h)===1){let _=s+"|"+e;return i.capture?`(${_})`:i.wrap===!1?_:`(?:${_})`}let f=Hi(s)||Hi(e),u={min:s,max:e,a:l,b:h},S=[],m=[];if(f&&(u.isPadded=f,u.maxLen=String(u.max).length),l<0){let _=h<0?Math.abs(h):1;m=Ti(_,Math.abs(l),u,i),l=u.a=0}return h>=0&&(S=Ti(l,h,u,i)),u.negatives=m,u.positives=S,u.result=na(m,S,i),i.capture===!0?u.result=`(${u.result})`:i.wrap!==!1&&S.length+m.length>1&&(u.result=`(?:${u.result})`),ye.cache[c]=u,u.result};function na(s,e,t){let i=jt(s,e,"-",!1,t)||[],n=jt(e,s,"",!1,t)||[],r=jt(s,e,"-?",!0,t)||[];return i.concat(r).concat(n).join("|")}function ra(s,e){let t=1,i=1,n=Li(s,t),r=new Set([e]);for(;s<=n&&n<=e;)r.add(n),t+=1,n=Li(s,t);for(n=Oi(e+1,i)-1;s<n&&n<=e;)r.add(n),i+=1,n=Oi(e+1,i)-1;return r=[...r],r.sort(ca),r}function aa(s,e,t){if(s===e)return{pattern:s,count:[],digits:0};let i=oa(s,e),n=i.length,r="",a=0;for(let o=0;o<n;o++){let[c,l]=i[o];c===l?r+=c:c!=="0"||l!=="9"?r+=la(c,l,t):a++}return a&&(r+=t.shorthand===!0?"\\d":"[0-9]"),{pattern:r,count:[a],digits:n}}function Ti(s,e,t,i){let n=ra(s,e),r=[],a=s,o;for(let c=0;c<n.length;c++){let l=n[c],h=aa(String(a),String(l),i),f="";if(!t.isPadded&&o&&o.pattern===h.pattern){o.count.length>1&&o.count.pop(),o.count.push(h.count[0]),o.string=o.pattern+Ni(o.count),a=l+1;continue}t.isPadded&&(f=ua(l,t,i)),h.string=f+h.pattern+Ni(h.count),r.push(h),a=l+1,o=h}return r}function jt(s,e,t,i,n){let r=[];for(let a of s){let{string:o}=a;!i&&!Pi(e,"string",o)&&r.push(t+o),i&&Pi(e,"string",o)&&r.push(t+o)}return r}function oa(s,e){let t=[];for(let i=0;i<s.length;i++)t.push([s[i],e[i]]);return t}function ca(s,e){return s>e?1:e>s?-1:0}function Pi(s,e,t){return s.some(i=>i[e]===t)}function Li(s,e){return Number(String(s).slice(0,-e)+"9".repeat(e))}function Oi(s,e){return s-s%Math.pow(10,e)}function Ni(s){let[e=0,t=""]=s;return t||e>1?`{${e+(t?","+t:"")}}`:""}function la(s,e,t){return`[${s}${e-s===1?"":"-"}${e}]`}function Hi(s){return/^-?(0+)\d/.test(s)}function ua(s,e,t){if(!e.isPadded)return s;let i=Math.abs(e.maxLen-String(s).length),n=t.relaxZeros!==!1;switch(i){case 0:return"";case 1:return n?"0?":"0";case 2:return n?"0{0,2}":"00";default:return n?`0{0,${i}}`:`0{${i}}`}}ye.cache={};ye.clearCache=()=>ye.cache={};Ii.exports=ye});var Zt=x((Yc,Wi)=>{"use strict";var ha=require("util"),$i=Di(),Fi=s=>s!==null&&typeof s=="object"&&!Array.isArray(s),fa=s=>e=>s===!0?Number(e):String(e),Qt=s=>typeof s=="number"||typeof s=="string"&&s!=="",De=s=>Number.isInteger(+s),Xt=s=>{let e=`${s}`,t=-1;if(e[0]==="-"&&(e=e.slice(1)),e==="0")return!1;for(;e[++t]==="0";);return t>0},da=(s,e,t)=>typeof s=="string"||typeof e=="string"?!0:t.stringify===!0,pa=(s,e,t)=>{if(e>0){let i=s[0]==="-"?"-":"";i&&(s=s.slice(1)),s=i+s.padStart(i?e-1:e,"0")}return t===!1?String(s):s},ut=(s,e)=>{let t=s[0]==="-"?"-":"";for(t&&(s=s.slice(1),e--);s.length<e;)s="0"+s;return t?"-"+s:s},ga=(s,e,t)=>{s.negatives.sort((o,c)=>o<c?-1:o>c?1:0),s.positives.sort((o,c)=>o<c?-1:o>c?1:0);let i=e.capture?"":"?:",n="",r="",a;return s.positives.length&&(n=s.positives.map(o=>ut(String(o),t)).join("|")),s.negatives.length&&(r=`-(${i}${s.negatives.map(o=>ut(String(o),t)).join("|")})`),n&&r?a=`${n}|${r}`:a=n||r,e.wrap?`(${i}${a})`:a},ki=(s,e,t,i)=>{if(t)return $i(s,e,{wrap:!1,...i});let n=String.fromCharCode(s);if(s===e)return n;let r=String.fromCharCode(e);return`[${n}-${r}]`},Mi=(s,e,t)=>{if(Array.isArray(s)){let i=t.wrap===!0,n=t.capture?"":"?:";return i?`(${n}${s.join("|")})`:s.join("|")}return $i(s,e,t)},Bi=(...s)=>new RangeError("Invalid range arguments: "+ha.inspect(...s)),Gi=(s,e,t)=>{if(t.strictRanges===!0)throw Bi([s,e]);return[]},ma=(s,e)=>{if(e.strictRanges===!0)throw new TypeError(`Expected step "${s}" to be a number`);return[]},ya=(s,e,t=1,i={})=>{let n=Number(s),r=Number(e);if(!Number.isInteger(n)||!Number.isInteger(r)){if(i.strictRanges===!0)throw Bi([s,e]);return[]}n===0&&(n=0),r===0&&(r=0);let a=n>r,o=String(s),c=String(e),l=String(t);t=Math.max(Math.abs(t),1);let h=Xt(o)||Xt(c)||Xt(l),f=h?Math.max(o.length,c.length,l.length):0,u=h===!1&&da(s,e,i)===!1,S=i.transform||fa(u);if(i.toRegex&&t===1)return ki(ut(s,f),ut(e,f),!0,i);let m={negatives:[],positives:[]},_=j=>m[j<0?"negatives":"positives"].push(Math.abs(j)),P=[],D=0;for(;a?n>=r:n<=r;)i.toRegex===!0&&t>1?_(n):P.push(pa(S(n,D),f,u)),n=a?n-t:n+t,D++;return i.toRegex===!0?t>1?ga(m,i,f):Mi(P,null,{wrap:!1,...i}):P},Sa=(s,e,t=1,i={})=>{if(!De(s)&&s.length>1||!De(e)&&e.length>1)return Gi(s,e,i);let n=i.transform||(u=>String.fromCharCode(u)),r=`${s}`.charCodeAt(0),a=`${e}`.charCodeAt(0),o=r>a,c=Math.min(r,a),l=Math.max(r,a);if(i.toRegex&&t===1)return ki(c,l,!1,i);let h=[],f=0;for(;o?r>=a:r<=a;)h.push(n(r,f)),r=o?r-t:r+t,f++;return i.toRegex===!0?Mi(h,null,{wrap:!1,options:i}):h},lt=(s,e,t,i={})=>{if(e==null&&Qt(s))return[s];if(!Qt(s)||!Qt(e))return Gi(s,e,i);if(typeof t=="function")return lt(s,e,1,{transform:t});if(Fi(t))return lt(s,e,0,t);let n={...i};return n.capture===!0&&(n.wrap=!0),t=t||n.step||1,De(t)?De(s)&&De(e)?ya(s,e,t,n):Sa(s,e,Math.max(Math.abs(t),1),n):t!=null&&!Fi(t)?ma(t,n):lt(s,e,1,t)};Wi.exports=lt});var Vi=x((qc,Ui)=>{"use strict";var Ea=Zt(),Ki=ot(),_a=(s,e={})=>{let t=(i,n={})=>{let r=Ki.isInvalidBrace(n),a=i.invalid===!0&&e.escapeInvalid===!0,o=r===!0||a===!0,c=e.escapeInvalid===!0?"\\":"",l="";if(i.isOpen===!0)return c+i.value;if(i.isClose===!0)return console.log("node.isClose",c,i.value),c+i.value;if(i.type==="open")return o?c+i.value:"(";if(i.type==="close")return o?c+i.value:")";if(i.type==="comma")return i.prev.type==="comma"?"":o?i.value:"|";if(i.value)return i.value;if(i.nodes&&i.ranges>0){let h=Ki.reduce(i.nodes),f=Ea(...h,{...e,wrap:!1,toRegex:!0,strictZeros:!0});if(f.length!==0)return h.length>1&&f.length>1?`(${f})`:f}if(i.nodes)for(let h of i.nodes)l+=t(h,i);return l};return t(s)};Ui.exports=_a});var qi=x((jc,Yi)=>{"use strict";var wa=Zt(),zi=ct(),Ce=ot(),Se=(s="",e="",t=!1)=>{let i=[];if(s=[].concat(s),e=[].concat(e),!e.length)return s;if(!s.length)return t?Ce.flatten(e).map(n=>`{${n}}`):e;for(let n of s)if(Array.isArray(n))for(let r of n)i.push(Se(r,e,t));else for(let r of e)t===!0&&typeof r=="string"&&(r=`{${r}}`),i.push(Array.isArray(r)?Se(n,r,t):n+r);return Ce.flatten(i)},va=(s,e={})=>{let t=e.rangeLimit===void 0?1e3:e.rangeLimit,i=(n,r={})=>{n.queue=[];let a=r,o=r.queue;for(;a.type!=="brace"&&a.type!=="root"&&a.parent;)a=a.parent,o=a.queue;if(n.invalid||n.dollar){o.push(Se(o.pop(),zi(n,e)));return}if(n.type==="brace"&&n.invalid!==!0&&n.nodes.length===2){o.push(Se(o.pop(),["{}"]));return}if(n.nodes&&n.ranges>0){let f=Ce.reduce(n.nodes);if(Ce.exceedsLimit(...f,e.step,t))throw new RangeError("expanded array length exceeds range limit. Use options.rangeLimit to increase or disable the limit.");let u=wa(...f,e);u.length===0&&(u=zi(n,e)),o.push(Se(o.pop(),u)),n.nodes=[];return}let c=Ce.encloseBrace(n),l=n.queue,h=n;for(;h.type!=="brace"&&h.type!=="root"&&h.parent;)h=h.parent,l=h.queue;for(let f=0;f<n.nodes.length;f++){let u=n.nodes[f];if(u.type==="comma"&&n.type==="brace"){f===1&&l.push(""),l.push("");continue}if(u.type==="close"){o.push(Se(o.pop(),l,c));continue}if(u.value&&u.type!=="open"){l.push(Se(l.pop(),u.value));continue}u.nodes&&i(u,n)}return l};return Ce.flatten(i(s))};Yi.exports=va});var Qi=x((Qc,ji)=>{"use strict";ji.exports={MAX_LENGTH:1e4,CHAR_0:"0",CHAR_9:"9",CHAR_UPPERCASE_A:"A",CHAR_LOWERCASE_A:"a",CHAR_UPPERCASE_Z:"Z",CHAR_LOWERCASE_Z:"z",CHAR_LEFT_PARENTHESES:"(",CHAR_RIGHT_PARENTHESES:")",CHAR_ASTERISK:"*",CHAR_AMPERSAND:"&",CHAR_AT:"@",CHAR_BACKSLASH:"\\",CHAR_BACKTICK:"`",CHAR_CARRIAGE_RETURN:"\r",CHAR_CIRCUMFLEX_ACCENT:"^",CHAR_COLON:":",CHAR_COMMA:",",CHAR_DOLLAR:"$",CHAR_DOT:".",CHAR_DOUBLE_QUOTE:'"',CHAR_EQUAL:"=",CHAR_EXCLAMATION_MARK:"!",CHAR_FORM_FEED:"\f",CHAR_FORWARD_SLASH:"/",CHAR_HASH:"#",CHAR_HYPHEN_MINUS:"-",CHAR_LEFT_ANGLE_BRACKET:"<",CHAR_LEFT_CURLY_BRACE:"{",CHAR_LEFT_SQUARE_BRACKET:"[",CHAR_LINE_FEED:`
`,CHAR_NO_BREAK_SPACE:"\xA0",CHAR_PERCENT:"%",CHAR_PLUS:"+",CHAR_QUESTION_MARK:"?",CHAR_RIGHT_ANGLE_BRACKET:">",CHAR_RIGHT_CURLY_BRACE:"}",CHAR_RIGHT_SQUARE_BRACKET:"]",CHAR_SEMICOLON:";",CHAR_SINGLE_QUOTE:"'",CHAR_SPACE:" ",CHAR_TAB:"	",CHAR_UNDERSCORE:"_",CHAR_VERTICAL_LINE:"|",CHAR_ZERO_WIDTH_NOBREAK_SPACE:"\uFEFF"}});var tn=x((Xc,en)=>{"use strict";var Ra=ct(),{MAX_LENGTH:Xi,CHAR_BACKSLASH:Jt,CHAR_BACKTICK:Ca,CHAR_COMMA:Aa,CHAR_DOT:ba,CHAR_LEFT_PARENTHESES:xa,CHAR_RIGHT_PARENTHESES:Ta,CHAR_LEFT_CURLY_BRACE:Pa,CHAR_RIGHT_CURLY_BRACE:La,CHAR_LEFT_SQUARE_BRACKET:Zi,CHAR_RIGHT_SQUARE_BRACKET:Ji,CHAR_DOUBLE_QUOTE:Oa,CHAR_SINGLE_QUOTE:Na,CHAR_NO_BREAK_SPACE:Ha,CHAR_ZERO_WIDTH_NOBREAK_SPACE:Ia}=Qi(),Da=(s,e={})=>{if(typeof s!="string")throw new TypeError("Expected a string");let t=e||{},i=typeof t.maxLength=="number"?Math.min(Xi,t.maxLength):Xi;if(s.length>i)throw new SyntaxError(`Input length (${s.length}), exceeds max characters (${i})`);let n={type:"root",input:s,nodes:[]},r=[n],a=n,o=n,c=0,l=s.length,h=0,f=0,u,S=()=>s[h++],m=_=>{if(_.type==="text"&&o.type==="dot"&&(o.type="text"),o&&o.type==="text"&&_.type==="text"){o.value+=_.value;return}return a.nodes.push(_),_.parent=a,_.prev=o,o=_,_};for(m({type:"bos"});h<l;)if(a=r[r.length-1],u=S(),!(u===Ia||u===Ha)){if(u===Jt){m({type:"text",value:(e.keepEscaping?u:"")+S()});continue}if(u===Ji){m({type:"text",value:"\\"+u});continue}if(u===Zi){c++;let _;for(;h<l&&(_=S());){if(u+=_,_===Zi){c++;continue}if(_===Jt){u+=S();continue}if(_===Ji&&(c--,c===0))break}m({type:"text",value:u});continue}if(u===xa){a=m({type:"paren",nodes:[]}),r.push(a),m({type:"text",value:u});continue}if(u===Ta){if(a.type!=="paren"){m({type:"text",value:u});continue}a=r.pop(),m({type:"text",value:u}),a=r[r.length-1];continue}if(u===Oa||u===Na||u===Ca){let _=u,P;for(e.keepQuotes!==!0&&(u="");h<l&&(P=S());){if(P===Jt){u+=P+S();continue}if(P===_){e.keepQuotes===!0&&(u+=P);break}u+=P}m({type:"text",value:u});continue}if(u===Pa){f++;let P={type:"brace",open:!0,close:!1,dollar:o.value&&o.value.slice(-1)==="$"||a.dollar===!0,depth:f,commas:0,ranges:0,nodes:[]};a=m(P),r.push(a),m({type:"open",value:u});continue}if(u===La){if(a.type!=="brace"){m({type:"text",value:u});continue}let _="close";a=r.pop(),a.close=!0,m({type:_,value:u}),f--,a=r[r.length-1];continue}if(u===Aa&&f>0){if(a.ranges>0){a.ranges=0;let _=a.nodes.shift();a.nodes=[_,{type:"text",value:Ra(a)}]}m({type:"comma",value:u}),a.commas++;continue}if(u===ba&&f>0&&a.commas===0){let _=a.nodes;if(f===0||_.length===0){m({type:"text",value:u});continue}if(o.type==="dot"){if(a.range=[],o.value+=u,o.type="range",a.nodes.length!==3&&a.nodes.length!==5){a.invalid=!0,a.ranges=0,o.type="text";continue}a.ranges++,a.args=[];continue}if(o.type==="range"){_.pop();let P=_[_.length-1];P.value+=o.value+u,o=P,a.ranges--;continue}m({type:"dot",value:u});continue}m({type:"text",value:u})}do if(a=r.pop(),a.type!=="root"){a.nodes.forEach(D=>{D.nodes||(D.type==="open"&&(D.isOpen=!0),D.type==="close"&&(D.isClose=!0),D.nodes||(D.type="text"),D.invalid=!0)});let _=r[r.length-1],P=_.nodes.indexOf(a);_.nodes.splice(P,1,...a.nodes)}while(r.length>0);return m({type:"eos"}),n};en.exports=Da});var rn=x((Zc,nn)=>{"use strict";var sn=ct(),Fa=Vi(),$a=qi(),ka=tn(),ee=(s,e={})=>{let t=[];if(Array.isArray(s))for(let i of s){let n=ee.create(i,e);Array.isArray(n)?t.push(...n):t.push(n)}else t=[].concat(ee.create(s,e));return e&&e.expand===!0&&e.nodupes===!0&&(t=[...new Set(t)]),t};ee.parse=(s,e={})=>ka(s,e);ee.stringify=(s,e={})=>sn(typeof s=="string"?ee.parse(s,e):s,e);ee.compile=(s,e={})=>(typeof s=="string"&&(s=ee.parse(s,e)),Fa(s,e));ee.expand=(s,e={})=>{typeof s=="string"&&(s=ee.parse(s,e));let t=$a(s,e);return e.noempty===!0&&(t=t.filter(Boolean)),e.nodupes===!0&&(t=[...new Set(t)]),t};ee.create=(s,e={})=>s===""||s.length<3?[s]:e.expand!==!0?ee.compile(s,e):ee.expand(s,e);nn.exports=ee});var an=x((Jc,Ma)=>{Ma.exports=["3dm","3ds","3g2","3gp","7z","a","aac","adp","afdesign","afphoto","afpub","ai","aif","aiff","alz","ape","apk","appimage","ar","arj","asf","au","avi","bak","baml","bh","bin","bk","bmp","btif","bz2","bzip2","cab","caf","cgm","class","cmx","cpio","cr2","cur","dat","dcm","deb","dex","djvu","dll","dmg","dng","doc","docm","docx","dot","dotm","dra","DS_Store","dsk","dts","dtshd","dvb","dwg","dxf","ecelp4800","ecelp7470","ecelp9600","egg","eol","eot","epub","exe","f4v","fbs","fh","fla","flac","flatpak","fli","flv","fpx","fst","fvt","g3","gh","gif","graffle","gz","gzip","h261","h263","h264","icns","ico","ief","img","ipa","iso","jar","jpeg","jpg","jpgv","jpm","jxr","key","ktx","lha","lib","lvp","lz","lzh","lzma","lzo","m3u","m4a","m4v","mar","mdi","mht","mid","midi","mj2","mka","mkv","mmr","mng","mobi","mov","movie","mp3","mp4","mp4a","mpeg","mpg","mpga","mxu","nef","npx","numbers","nupkg","o","odp","ods","odt","oga","ogg","ogv","otf","ott","pages","pbm","pcx","pdb","pdf","pea","pgm","pic","png","pnm","pot","potm","potx","ppa","ppam","ppm","pps","ppsm","ppsx","ppt","pptm","pptx","psd","pya","pyc","pyo","pyv","qt","rar","ras","raw","resources","rgb","rip","rlc","rmf","rmvb","rpm","rtf","rz","s3m","s7z","scpt","sgi","shar","snap","sil","sketch","slk","smv","snk","so","stl","suo","sub","swf","tar","tbz","tbz2","tga","tgz","thmx","tif","tiff","tlz","ttc","ttf","txz","udf","uvh","uvi","uvm","uvp","uvs","uvu","viv","vob","war","wav","wax","wbmp","wdp","weba","webm","webp","whl","wim","wm","wma","wmv","wmx","woff","woff2","wrm","wvx","xbm","xif","xla","xlam","xls","xlsb","xlsm","xlsx","xlt","xltm","xltx","xm","xmind","xpi","xpm","xwd","xz","z","zip","zipx"]});var cn=x((el,on)=>{on.exports=an()});var un=x((tl,ln)=>{"use strict";var Ba=require("path"),Ga=cn(),Wa=new Set(Ga);ln.exports=s=>Wa.has(Ba.extname(s).slice(1).toLowerCase())});var ht=x(w=>{"use strict";var{sep:Ka}=require("path"),{platform:es}=process,Ua=require("os");w.EV_ALL="all";w.EV_READY="ready";w.EV_ADD="add";w.EV_CHANGE="change";w.EV_ADD_DIR="addDir";w.EV_UNLINK="unlink";w.EV_UNLINK_DIR="unlinkDir";w.EV_RAW="raw";w.EV_ERROR="error";w.STR_DATA="data";w.STR_END="end";w.STR_CLOSE="close";w.FSEVENT_CREATED="created";w.FSEVENT_MODIFIED="modified";w.FSEVENT_DELETED="deleted";w.FSEVENT_MOVED="moved";w.FSEVENT_CLONED="cloned";w.FSEVENT_UNKNOWN="unknown";w.FSEVENT_FLAG_MUST_SCAN_SUBDIRS=1;w.FSEVENT_TYPE_FILE="file";w.FSEVENT_TYPE_DIRECTORY="directory";w.FSEVENT_TYPE_SYMLINK="symlink";w.KEY_LISTENERS="listeners";w.KEY_ERR="errHandlers";w.KEY_RAW="rawEmitters";w.HANDLER_KEYS=[w.KEY_LISTENERS,w.KEY_ERR,w.KEY_RAW];w.DOT_SLASH=`.${Ka}`;w.BACK_SLASH_RE=/\\/g;w.DOUBLE_SLASH_RE=/\/\//;w.SLASH_OR_BACK_SLASH_RE=/[/\\]/;w.DOT_RE=/\..*\.(sw[px])$|~$|\.subl.*\.tmp/;w.REPLACER_RE=/^\.[/\\]/;w.SLASH="/";w.SLASH_SLASH="//";w.BRACE_START="{";w.BANG="!";w.ONE_DOT=".";w.TWO_DOTS="..";w.STAR="*";w.GLOBSTAR="**";w.ROOT_GLOBSTAR="/**/*";w.SLASH_GLOBSTAR="/**";w.DIR_SUFFIX="Dir";w.ANYMATCH_OPTS={dot:!0};w.STRING_TYPE="string";w.FUNCTION_TYPE="function";w.EMPTY_STR="";w.EMPTY_FN=()=>{};w.IDENTITY_FN=s=>s;w.isWindows=es==="win32";w.isMacos=es==="darwin";w.isLinux=es==="linux";w.isIBMi=Ua.type()==="OS400"});var mn=x((il,gn)=>{"use strict";var le=require("fs"),G=require("path"),{promisify:Me}=require("util"),Va=un(),{isWindows:za,isLinux:Ya,EMPTY_FN:qa,EMPTY_STR:ja,KEY_LISTENERS:Ae,KEY_ERR:ts,KEY_RAW:Fe,HANDLER_KEYS:Qa,EV_CHANGE:dt,EV_ADD:ft,EV_ADD_DIR:Xa,EV_ERROR:fn,STR_DATA:Za,STR_END:Ja,BRACE_START:eo,STAR:to}=ht(),so="watch",io=Me(le.open),dn=Me(le.stat),no=Me(le.lstat),ro=Me(le.close),ss=Me(le.realpath),ao={lstat:no,stat:dn},ns=(s,e)=>{s instanceof Set?s.forEach(e):e(s)},$e=(s,e,t)=>{let i=s[e];i instanceof Set||(s[e]=i=new Set([i])),i.add(t)},oo=s=>e=>{let t=s[e];t instanceof Set?t.clear():delete s[e]},ke=(s,e,t)=>{let i=s[e];i instanceof Set?i.delete(t):i===t&&delete s[e]},pn=s=>s instanceof Set?s.size===0:!s,pt=new Map;function hn(s,e,t,i,n){let r=(a,o)=>{t(s),n(a,o,{watchedPath:s}),o&&s!==o&&gt(G.resolve(s,o),Ae,G.join(s,o))};try{return le.watch(s,e,r)}catch(a){i(a)}}var gt=(s,e,t,i,n)=>{let r=pt.get(s);r&&ns(r[e],a=>{a(t,i,n)})},co=(s,e,t,i)=>{let{listener:n,errHandler:r,rawEmitter:a}=i,o=pt.get(e),c;if(!t.persistent)return c=hn(s,t,n,r,a),c.close.bind(c);if(o)$e(o,Ae,n),$e(o,ts,r),$e(o,Fe,a);else{if(c=hn(s,t,gt.bind(null,e,Ae),r,gt.bind(null,e,Fe)),!c)return;c.on(fn,async l=>{let h=gt.bind(null,e,ts);if(o.watcherUnusable=!0,za&&l.code==="EPERM")try{let f=await io(s,"r");await ro(f),h(l)}catch{}else h(l)}),o={listeners:n,errHandlers:r,rawEmitters:a,watcher:c},pt.set(e,o)}return()=>{ke(o,Ae,n),ke(o,ts,r),ke(o,Fe,a),pn(o.listeners)&&(o.watcher.close(),pt.delete(e),Qa.forEach(oo(o)),o.watcher=void 0,Object.freeze(o))}},is=new Map,lo=(s,e,t,i)=>{let{listener:n,rawEmitter:r}=i,a=is.get(e),o=new Set,c=new Set,l=a&&a.options;return l&&(l.persistent<t.persistent||l.interval>t.interval)&&(o=a.listeners,c=a.rawEmitters,le.unwatchFile(e),a=void 0),a?($e(a,Ae,n),$e(a,Fe,r)):(a={listeners:n,rawEmitters:r,options:t,watcher:le.watchFile(e,t,(h,f)=>{ns(a.rawEmitters,S=>{S(dt,e,{curr:h,prev:f})});let u=h.mtimeMs;(h.size!==f.size||u>f.mtimeMs||u===0)&&ns(a.listeners,S=>S(s,h))})},is.set(e,a)),()=>{ke(a,Ae,n),ke(a,Fe,r),pn(a.listeners)&&(is.delete(e),le.unwatchFile(e),a.options=a.watcher=void 0,Object.freeze(a))}},rs=class{constructor(e){this.fsw=e,this._boundHandleError=t=>e._handleError(t)}_watchWithNodeFs(e,t){let i=this.fsw.options,n=G.dirname(e),r=G.basename(e);this.fsw._getWatchedDir(n).add(r);let o=G.resolve(e),c={persistent:i.persistent};t||(t=qa);let l;return i.usePolling?(c.interval=i.enableBinaryInterval&&Va(r)?i.binaryInterval:i.interval,l=lo(e,o,c,{listener:t,rawEmitter:this.fsw._emitRaw})):l=co(e,o,c,{listener:t,errHandler:this._boundHandleError,rawEmitter:this.fsw._emitRaw}),l}_handleFile(e,t,i){if(this.fsw.closed)return;let n=G.dirname(e),r=G.basename(e),a=this.fsw._getWatchedDir(n),o=t;if(a.has(r))return;let c=async(h,f)=>{if(this.fsw._throttle(so,e,5)){if(!f||f.mtimeMs===0)try{let u=await dn(e);if(this.fsw.closed)return;let S=u.atimeMs,m=u.mtimeMs;(!S||S<=m||m!==o.mtimeMs)&&this.fsw._emit(dt,e,u),Ya&&o.ino!==u.ino?(this.fsw._closeFile(h),o=u,this.fsw._addPathCloser(h,this._watchWithNodeFs(e,c))):o=u}catch{this.fsw._remove(n,r)}else if(a.has(r)){let u=f.atimeMs,S=f.mtimeMs;(!u||u<=S||S!==o.mtimeMs)&&this.fsw._emit(dt,e,f),o=f}}},l=this._watchWithNodeFs(e,c);if(!(i&&this.fsw.options.ignoreInitial)&&this.fsw._isntIgnored(e)){if(!this.fsw._throttle(ft,e,0))return;this.fsw._emit(ft,e,t)}return l}async _handleSymlink(e,t,i,n){if(this.fsw.closed)return;let r=e.fullPath,a=this.fsw._getWatchedDir(t);if(!this.fsw.options.followSymlinks){this.fsw._incrReadyCount();let o;try{o=await ss(i)}catch{return this.fsw._emitReady(),!0}return this.fsw.closed?void 0:(a.has(n)?this.fsw._symlinkPaths.get(r)!==o&&(this.fsw._symlinkPaths.set(r,o),this.fsw._emit(dt,i,e.stats)):(a.add(n),this.fsw._symlinkPaths.set(r,o),this.fsw._emit(ft,i,e.stats)),this.fsw._emitReady(),!0)}if(this.fsw._symlinkPaths.has(r))return!0;this.fsw._symlinkPaths.set(r,!0)}_handleRead(e,t,i,n,r,a,o){if(e=G.join(e,ja),!i.hasGlob&&(o=this.fsw._throttle("readdir",e,1e3),!o))return;let c=this.fsw._getWatchedDir(i.path),l=new Set,h=this.fsw._readdirp(e,{fileFilter:f=>i.filterPath(f),directoryFilter:f=>i.filterDir(f),depth:0}).on(Za,async f=>{if(this.fsw.closed){h=void 0;return}let u=f.path,S=G.join(e,u);if(l.add(u),!(f.stats.isSymbolicLink()&&await this._handleSymlink(f,e,S,u))){if(this.fsw.closed){h=void 0;return}(u===n||!n&&!c.has(u))&&(this.fsw._incrReadyCount(),S=G.join(r,G.relative(r,S)),this._addToNodeFs(S,t,i,a+1))}}).on(fn,this._boundHandleError);return new Promise(f=>h.once(Ja,()=>{if(this.fsw.closed){h=void 0;return}let u=o?o.clear():!1;f(),c.getChildren().filter(S=>S!==e&&!l.has(S)&&(!i.hasGlob||i.filterPath({fullPath:G.resolve(e,S)}))).forEach(S=>{this.fsw._remove(e,S)}),h=void 0,u&&this._handleRead(e,!1,i,n,r,a,o)}))}async _handleDir(e,t,i,n,r,a,o){let c=this.fsw._getWatchedDir(G.dirname(e)),l=c.has(G.basename(e));!(i&&this.fsw.options.ignoreInitial)&&!r&&!l&&(!a.hasGlob||a.globFilter(e))&&this.fsw._emit(Xa,e,t),c.add(G.basename(e)),this.fsw._getWatchedDir(e);let h,f,u=this.fsw.options.depth;if((u==null||n<=u)&&!this.fsw._symlinkPaths.has(o)){if(!r&&(await this._handleRead(e,i,a,r,e,n,h),this.fsw.closed))return;f=this._watchWithNodeFs(e,(S,m)=>{m&&m.mtimeMs===0||this._handleRead(S,!1,a,r,e,n,h)})}return f}async _addToNodeFs(e,t,i,n,r){let a=this.fsw._emitReady;if(this.fsw._isIgnored(e)||this.fsw.closed)return a(),!1;let o=this.fsw._getWatchHelpers(e,n);!o.hasGlob&&i&&(o.hasGlob=i.hasGlob,o.globFilter=i.globFilter,o.filterPath=c=>i.filterPath(c),o.filterDir=c=>i.filterDir(c));try{let c=await ao[o.statMethod](o.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(o.watchPath,c))return a(),!1;let l=this.fsw.options.followSymlinks&&!e.includes(to)&&!e.includes(eo),h;if(c.isDirectory()){let f=G.resolve(e),u=l?await ss(e):e;if(this.fsw.closed||(h=await this._handleDir(o.watchPath,c,t,n,r,o,u),this.fsw.closed))return;f!==u&&u!==void 0&&this.fsw._symlinkPaths.set(f,u)}else if(c.isSymbolicLink()){let f=l?await ss(e):e;if(this.fsw.closed)return;let u=G.dirname(o.watchPath);if(this.fsw._getWatchedDir(u).add(o.watchPath),this.fsw._emit(ft,o.watchPath,c),h=await this._handleDir(u,c,t,n,e,o,f),this.fsw.closed)return;f!==void 0&&this.fsw._symlinkPaths.set(G.resolve(e),f)}else h=this._handleFile(o.watchPath,c,t);return a(),this.fsw._addPathCloser(e,h),!1}catch(c){if(this.fsw._handleError(c))return a(),e}}};gn.exports=rs});var Rn=x((nl,ds)=>{"use strict";var hs=require("fs"),W=require("path"),{promisify:fs}=require("util"),be;try{be=require("fsevents")}catch(s){process.env.CHOKIDAR_PRINT_FSEVENTS_REQUIRE_ERROR&&console.error(s)}if(be){let s=process.version.match(/v(\d+)\.(\d+)/);if(s&&s[1]&&s[2]){let e=Number.parseInt(s[1],10),t=Number.parseInt(s[2],10);e===8&&t<16&&(be=void 0)}}var{EV_ADD:as,EV_CHANGE:uo,EV_ADD_DIR:yn,EV_UNLINK:mt,EV_ERROR:ho,STR_DATA:fo,STR_END:po,FSEVENT_CREATED:go,FSEVENT_MODIFIED:mo,FSEVENT_DELETED:yo,FSEVENT_MOVED:So,FSEVENT_UNKNOWN:Eo,FSEVENT_FLAG_MUST_SCAN_SUBDIRS:_o,FSEVENT_TYPE_FILE:wo,FSEVENT_TYPE_DIRECTORY:Be,FSEVENT_TYPE_SYMLINK:vn,ROOT_GLOBSTAR:Sn,DIR_SUFFIX:vo,DOT_SLASH:En,FUNCTION_TYPE:os,EMPTY_FN:Ro,IDENTITY_FN:Co}=ht(),Ao=s=>isNaN(s)?{}:{depth:s},ls=fs(hs.stat),bo=fs(hs.lstat),_n=fs(hs.realpath),xo={stat:ls,lstat:bo},Ee=new Map,To=10,Po=new Set([69888,70400,71424,72704,73472,131328,131840,262912]),Lo=(s,e)=>({stop:be.watch(s,e)});function Oo(s,e,t,i){let n=W.extname(e)?W.dirname(e):e,r=W.dirname(n),a=Ee.get(n);No(r)&&(n=r);let o=W.resolve(s),c=o!==e,l=(f,u,S)=>{c&&(f=f.replace(e,o)),(f===o||!f.indexOf(o+W.sep))&&t(f,u,S)},h=!1;for(let f of Ee.keys())if(e.indexOf(W.resolve(f)+W.sep)===0){n=f,a=Ee.get(n),h=!0;break}return a||h?a.listeners.add(l):(a={listeners:new Set([l]),rawEmitter:i,watcher:Lo(n,(f,u)=>{if(!a.listeners.size||u&_o)return;let S=be.getInfo(f,u);a.listeners.forEach(m=>{m(f,u,S)}),a.rawEmitter(S.event,f,S)})},Ee.set(n,a)),()=>{let f=a.listeners;if(f.delete(l),!f.size&&(Ee.delete(n),a.watcher))return a.watcher.stop().then(()=>{a.rawEmitter=a.watcher=void 0,Object.freeze(a)})}}var No=s=>{let e=0;for(let t of Ee.keys())if(t.indexOf(s)===0&&(e++,e>=To))return!0;return!1},Ho=()=>be&&Ee.size<128,cs=(s,e)=>{let t=0;for(;!s.indexOf(e)&&(s=W.dirname(s))!==e;)t++;return t},wn=(s,e)=>s.type===Be&&e.isDirectory()||s.type===vn&&e.isSymbolicLink()||s.type===wo&&e.isFile(),us=class{constructor(e){this.fsw=e}checkIgnored(e,t){let i=this.fsw._ignoredPaths;if(this.fsw._isIgnored(e,t))return i.add(e),t&&t.isDirectory()&&i.add(e+Sn),!0;i.delete(e),i.delete(e+Sn)}addOrChange(e,t,i,n,r,a,o,c){let l=r.has(a)?uo:as;this.handleEvent(l,e,t,i,n,r,a,o,c)}async checkExists(e,t,i,n,r,a,o,c){try{let l=await ls(e);if(this.fsw.closed)return;wn(o,l)?this.addOrChange(e,t,i,n,r,a,o,c):this.handleEvent(mt,e,t,i,n,r,a,o,c)}catch(l){l.code==="EACCES"?this.addOrChange(e,t,i,n,r,a,o,c):this.handleEvent(mt,e,t,i,n,r,a,o,c)}}handleEvent(e,t,i,n,r,a,o,c,l){if(!(this.fsw.closed||this.checkIgnored(t)))if(e===mt){let h=c.type===Be;(h||a.has(o))&&this.fsw._remove(r,o,h)}else{if(e===as){if(c.type===Be&&this.fsw._getWatchedDir(t),c.type===vn&&l.followSymlinks){let f=l.depth===void 0?void 0:cs(i,n)+1;return this._addToFsEvents(t,!1,!0,f)}this.fsw._getWatchedDir(r).add(o)}let h=c.type===Be?e+vo:e;this.fsw._emit(h,t),h===yn&&this._addToFsEvents(t,!1,!0)}}_watchWithFsEvents(e,t,i,n){if(this.fsw.closed||this.fsw._isIgnored(e))return;let r=this.fsw.options,o=Oo(e,t,async(c,l,h)=>{if(this.fsw.closed||r.depth!==void 0&&cs(c,t)>r.depth)return;let f=i(W.join(e,W.relative(e,c)));if(n&&!n(f))return;let u=W.dirname(f),S=W.basename(f),m=this.fsw._getWatchedDir(h.type===Be?f:u);if(Po.has(l)||h.event===Eo)if(typeof r.ignored===os){let _;try{_=await ls(f)}catch{}if(this.fsw.closed||this.checkIgnored(f,_))return;wn(h,_)?this.addOrChange(f,c,t,u,m,S,h,r):this.handleEvent(mt,f,c,t,u,m,S,h,r)}else this.checkExists(f,c,t,u,m,S,h,r);else switch(h.event){case go:case mo:return this.addOrChange(f,c,t,u,m,S,h,r);case yo:case So:return this.checkExists(f,c,t,u,m,S,h,r)}},this.fsw._emitRaw);return this.fsw._emitReady(),o}async _handleFsEventsSymlink(e,t,i,n){if(!(this.fsw.closed||this.fsw._symlinkPaths.has(t))){this.fsw._symlinkPaths.set(t,!0),this.fsw._incrReadyCount();try{let r=await _n(e);if(this.fsw.closed)return;if(this.fsw._isIgnored(r))return this.fsw._emitReady();this.fsw._incrReadyCount(),this._addToFsEvents(r||e,a=>{let o=e;return r&&r!==En?o=a.replace(r,e):a!==En&&(o=W.join(e,a)),i(o)},!1,n)}catch(r){if(this.fsw._handleError(r))return this.fsw._emitReady()}}}emitAdd(e,t,i,n,r){let a=i(e),o=t.isDirectory(),c=this.fsw._getWatchedDir(W.dirname(a)),l=W.basename(a);o&&this.fsw._getWatchedDir(a),!c.has(l)&&(c.add(l),(!n.ignoreInitial||r===!0)&&this.fsw._emit(o?yn:as,a,t))}initWatch(e,t,i,n){if(this.fsw.closed)return;let r=this._watchWithFsEvents(i.watchPath,W.resolve(e||i.watchPath),n,i.globFilter);this.fsw._addPathCloser(t,r)}async _addToFsEvents(e,t,i,n){if(this.fsw.closed)return;let r=this.fsw.options,a=typeof t===os?t:Co,o=this.fsw._getWatchHelpers(e);try{let c=await xo[o.statMethod](o.watchPath);if(this.fsw.closed)return;if(this.fsw._isIgnored(o.watchPath,c))throw null;if(c.isDirectory()){if(o.globFilter||this.emitAdd(a(e),c,a,r,i),n&&n>r.depth)return;this.fsw._readdirp(o.watchPath,{fileFilter:l=>o.filterPath(l),directoryFilter:l=>o.filterDir(l),...Ao(r.depth-(n||0))}).on(fo,l=>{if(this.fsw.closed||l.stats.isDirectory()&&!o.filterPath(l))return;let h=W.join(o.watchPath,l.path),{fullPath:f}=l;if(o.followSymlinks&&l.stats.isSymbolicLink()){let u=r.depth===void 0?void 0:cs(h,W.resolve(o.watchPath))+1;this._handleFsEventsSymlink(h,f,a,u)}else this.emitAdd(h,l.stats,a,r,i)}).on(ho,Ro).on(po,()=>{this.fsw._emitReady()})}else this.emitAdd(o.watchPath,c,a,r,i),this.fsw._emitReady()}catch(c){(!c||this.fsw._handleError(c))&&(this.fsw._emitReady(),this.fsw._emitReady())}if(r.persistent&&i!==!0)if(typeof t===os)this.initWatch(void 0,e,o,a);else{let c;try{c=await _n(o.watchPath)}catch{}this.initWatch(c,e,o,a)}}};ds.exports=us;ds.exports.canUse=Ho});var In=x(Ts=>{"use strict";var{EventEmitter:Io}=require("events"),bs=require("fs"),T=require("path"),{promisify:Ln}=require("util"),Do=li(),Es=mi().default,Fo=vi(),ps=Yt(),$o=rn(),ko=Vt(),Mo=mn(),Cn=Rn(),{EV_ALL:gs,EV_READY:Bo,EV_ADD:yt,EV_CHANGE:Ge,EV_UNLINK:An,EV_ADD_DIR:Go,EV_UNLINK_DIR:Wo,EV_RAW:Ko,EV_ERROR:ms,STR_CLOSE:Uo,STR_END:Vo,BACK_SLASH_RE:zo,DOUBLE_SLASH_RE:bn,SLASH_OR_BACK_SLASH_RE:Yo,DOT_RE:qo,REPLACER_RE:jo,SLASH:ys,SLASH_SLASH:Qo,BRACE_START:Xo,BANG:_s,ONE_DOT:On,TWO_DOTS:Zo,GLOBSTAR:Jo,SLASH_GLOBSTAR:Ss,ANYMATCH_OPTS:ws,STRING_TYPE:xs,FUNCTION_TYPE:ec,EMPTY_STR:vs,EMPTY_FN:tc,isWindows:sc,isMacos:ic,isIBMi:nc}=ht(),rc=Ln(bs.stat),ac=Ln(bs.readdir),Rs=(s=[])=>Array.isArray(s)?s:[s],Nn=(s,e=[])=>(s.forEach(t=>{Array.isArray(t)?Nn(t,e):e.push(t)}),e),xn=s=>{let e=Nn(Rs(s));if(!e.every(t=>typeof t===xs))throw new TypeError(`Non-string provided as watch path: ${e}`);return e.map(Hn)},Tn=s=>{let e=s.replace(zo,ys),t=!1;for(e.startsWith(Qo)&&(t=!0);e.match(bn);)e=e.replace(bn,ys);return t&&(e=ys+e),e},Hn=s=>Tn(T.normalize(Tn(s))),Pn=(s=vs)=>e=>typeof e!==xs?e:Hn(T.isAbsolute(e)?e:T.join(s,e)),oc=(s,e)=>T.isAbsolute(s)?s:s.startsWith(_s)?_s+T.join(e,s.slice(1)):T.join(e,s),se=(s,e)=>s[e]===void 0,Cs=class{constructor(e,t){this.path=e,this._removeWatcher=t,this.items=new Set}add(e){let{items:t}=this;t&&e!==On&&e!==Zo&&t.add(e)}async remove(e){let{items:t}=this;if(!t||(t.delete(e),t.size>0))return;let i=this.path;try{await ac(i)}catch{this._removeWatcher&&this._removeWatcher(T.dirname(i),T.basename(i))}}has(e){let{items:t}=this;if(t)return t.has(e)}getChildren(){let{items:e}=this;if(e)return[...e.values()]}dispose(){this.items.clear(),delete this.path,delete this._removeWatcher,delete this.items,Object.freeze(this)}},cc="stat",lc="lstat",As=class{constructor(e,t,i,n){this.fsw=n,this.path=e=e.replace(jo,vs),this.watchPath=t,this.fullWatchPath=T.resolve(t),this.hasGlob=t!==e,e===vs&&(this.hasGlob=!1),this.globSymlink=this.hasGlob&&i?void 0:!1,this.globFilter=this.hasGlob?Es(e,void 0,ws):!1,this.dirParts=this.getDirParts(e),this.dirParts.forEach(r=>{r.length>1&&r.pop()}),this.followSymlinks=i,this.statMethod=i?cc:lc}checkGlobSymlink(e){return this.globSymlink===void 0&&(this.globSymlink=e.fullParentDir===this.fullWatchPath?!1:{realPath:e.fullParentDir,linkPath:this.fullWatchPath}),this.globSymlink?e.fullPath.replace(this.globSymlink.realPath,this.globSymlink.linkPath):e.fullPath}entryPath(e){return T.join(this.watchPath,T.relative(this.watchPath,this.checkGlobSymlink(e)))}filterPath(e){let{stats:t}=e;if(t&&t.isSymbolicLink())return this.filterDir(e);let i=this.entryPath(e);return(this.hasGlob&&typeof this.globFilter===ec?this.globFilter(i):!0)&&this.fsw._isntIgnored(i,t)&&this.fsw._hasReadPermissions(t)}getDirParts(e){if(!this.hasGlob)return[];let t=[];return(e.includes(Xo)?$o.expand(e):[e]).forEach(n=>{t.push(T.relative(this.watchPath,n).split(Yo))}),t}filterDir(e){if(this.hasGlob){let t=this.getDirParts(this.checkGlobSymlink(e)),i=!1;this.unmatchedGlob=!this.dirParts.some(n=>n.every((r,a)=>(r===Jo&&(i=!0),i||!t[0][a]||Es(r,t[0][a],ws))))}return!this.unmatchedGlob&&this.fsw._isntIgnored(this.entryPath(e),e.stats)}},St=class extends Io{constructor(e){super();let t={};e&&Object.assign(t,e),this._watched=new Map,this._closers=new Map,this._ignoredPaths=new Set,this._throttled=new Map,this._symlinkPaths=new Map,this._streams=new Set,this.closed=!1,se(t,"persistent")&&(t.persistent=!0),se(t,"ignoreInitial")&&(t.ignoreInitial=!1),se(t,"ignorePermissionErrors")&&(t.ignorePermissionErrors=!1),se(t,"interval")&&(t.interval=100),se(t,"binaryInterval")&&(t.binaryInterval=300),se(t,"disableGlobbing")&&(t.disableGlobbing=!1),t.enableBinaryInterval=t.binaryInterval!==t.interval,se(t,"useFsEvents")&&(t.useFsEvents=!t.usePolling),Cn.canUse()||(t.useFsEvents=!1),se(t,"usePolling")&&!t.useFsEvents&&(t.usePolling=ic),nc&&(t.usePolling=!0);let n=process.env.CHOKIDAR_USEPOLLING;if(n!==void 0){let c=n.toLowerCase();c==="false"||c==="0"?t.usePolling=!1:c==="true"||c==="1"?t.usePolling=!0:t.usePolling=!!c}let r=process.env.CHOKIDAR_INTERVAL;r&&(t.interval=Number.parseInt(r,10)),se(t,"atomic")&&(t.atomic=!t.usePolling&&!t.useFsEvents),t.atomic&&(this._pendingUnlinks=new Map),se(t,"followSymlinks")&&(t.followSymlinks=!0),se(t,"awaitWriteFinish")&&(t.awaitWriteFinish=!1),t.awaitWriteFinish===!0&&(t.awaitWriteFinish={});let a=t.awaitWriteFinish;a&&(a.stabilityThreshold||(a.stabilityThreshold=2e3),a.pollInterval||(a.pollInterval=100),this._pendingWrites=new Map),t.ignored&&(t.ignored=Rs(t.ignored));let o=0;this._emitReady=()=>{o++,o>=this._readyCount&&(this._emitReady=tc,this._readyEmitted=!0,process.nextTick(()=>this.emit(Bo)))},this._emitRaw=(...c)=>this.emit(Ko,...c),this._readyEmitted=!1,this.options=t,t.useFsEvents?this._fsEventsHandler=new Cn(this):this._nodeFsHandler=new Mo(this),Object.freeze(t)}add(e,t,i){let{cwd:n,disableGlobbing:r}=this.options;this.closed=!1;let a=xn(e);return n&&(a=a.map(o=>{let c=oc(o,n);return r||!ps(o)?c:ko(c)})),a=a.filter(o=>o.startsWith(_s)?(this._ignoredPaths.add(o.slice(1)),!1):(this._ignoredPaths.delete(o),this._ignoredPaths.delete(o+Ss),this._userIgnored=void 0,!0)),this.options.useFsEvents&&this._fsEventsHandler?(this._readyCount||(this._readyCount=a.length),this.options.persistent&&(this._readyCount+=a.length),a.forEach(o=>this._fsEventsHandler._addToFsEvents(o))):(this._readyCount||(this._readyCount=0),this._readyCount+=a.length,Promise.all(a.map(async o=>{let c=await this._nodeFsHandler._addToNodeFs(o,!i,0,0,t);return c&&this._emitReady(),c})).then(o=>{this.closed||o.filter(c=>c).forEach(c=>{this.add(T.dirname(c),T.basename(t||c))})})),this}unwatch(e){if(this.closed)return this;let t=xn(e),{cwd:i}=this.options;return t.forEach(n=>{!T.isAbsolute(n)&&!this._closers.has(n)&&(i&&(n=T.join(i,n)),n=T.resolve(n)),this._closePath(n),this._ignoredPaths.add(n),this._watched.has(n)&&this._ignoredPaths.add(n+Ss),this._userIgnored=void 0}),this}close(){if(this.closed)return this._closePromise;this.closed=!0,this.removeAllListeners();let e=[];return this._closers.forEach(t=>t.forEach(i=>{let n=i();n instanceof Promise&&e.push(n)})),this._streams.forEach(t=>t.destroy()),this._userIgnored=void 0,this._readyCount=0,this._readyEmitted=!1,this._watched.forEach(t=>t.dispose()),["closers","watched","streams","symlinkPaths","throttled"].forEach(t=>{this[`_${t}`].clear()}),this._closePromise=e.length?Promise.all(e).then(()=>{}):Promise.resolve(),this._closePromise}getWatched(){let e={};return this._watched.forEach((t,i)=>{let n=this.options.cwd?T.relative(this.options.cwd,i):i;e[n||On]=t.getChildren().sort()}),e}emitWithAll(e,t){this.emit(...t),e!==ms&&this.emit(gs,...t)}async _emit(e,t,i,n,r){if(this.closed)return;let a=this.options;sc&&(t=T.normalize(t)),a.cwd&&(t=T.relative(a.cwd,t));let o=[e,t];r!==void 0?o.push(i,n,r):n!==void 0?o.push(i,n):i!==void 0&&o.push(i);let c=a.awaitWriteFinish,l;if(c&&(l=this._pendingWrites.get(t)))return l.lastChange=new Date,this;if(a.atomic){if(e===An)return this._pendingUnlinks.set(t,o),setTimeout(()=>{this._pendingUnlinks.forEach((h,f)=>{this.emit(...h),this.emit(gs,...h),this._pendingUnlinks.delete(f)})},typeof a.atomic=="number"?a.atomic:100),this;e===yt&&this._pendingUnlinks.has(t)&&(e=o[0]=Ge,this._pendingUnlinks.delete(t))}if(c&&(e===yt||e===Ge)&&this._readyEmitted){let h=(f,u)=>{f?(e=o[0]=ms,o[1]=f,this.emitWithAll(e,o)):u&&(o.length>2?o[2]=u:o.push(u),this.emitWithAll(e,o))};return this._awaitWriteFinish(t,c.stabilityThreshold,e,h),this}if(e===Ge&&!this._throttle(Ge,t,50))return this;if(a.alwaysStat&&i===void 0&&(e===yt||e===Go||e===Ge)){let h=a.cwd?T.join(a.cwd,t):t,f;try{f=await rc(h)}catch{}if(!f||this.closed)return;o.push(f)}return this.emitWithAll(e,o),this}_handleError(e){let t=e&&e.code;return e&&t!=="ENOENT"&&t!=="ENOTDIR"&&(!this.options.ignorePermissionErrors||t!=="EPERM"&&t!=="EACCES")&&this.emit(ms,e),e||this.closed}_throttle(e,t,i){this._throttled.has(e)||this._throttled.set(e,new Map);let n=this._throttled.get(e),r=n.get(t);if(r)return r.count++,!1;let a,o=()=>{let l=n.get(t),h=l?l.count:0;return n.delete(t),clearTimeout(a),l&&clearTimeout(l.timeoutObject),h};a=setTimeout(o,i);let c={timeoutObject:a,clear:o,count:0};return n.set(t,c),c}_incrReadyCount(){return this._readyCount++}_awaitWriteFinish(e,t,i,n){let r,a=e;this.options.cwd&&!T.isAbsolute(e)&&(a=T.join(this.options.cwd,e));let o=new Date,c=l=>{bs.stat(a,(h,f)=>{if(h||!this._pendingWrites.has(e)){h&&h.code!=="ENOENT"&&n(h);return}let u=Number(new Date);l&&f.size!==l.size&&(this._pendingWrites.get(e).lastChange=u);let S=this._pendingWrites.get(e);u-S.lastChange>=t?(this._pendingWrites.delete(e),n(void 0,f)):r=setTimeout(c,this.options.awaitWriteFinish.pollInterval,f)})};this._pendingWrites.has(e)||(this._pendingWrites.set(e,{lastChange:o,cancelWait:()=>(this._pendingWrites.delete(e),clearTimeout(r),i)}),r=setTimeout(c,this.options.awaitWriteFinish.pollInterval))}_getGlobIgnored(){return[...this._ignoredPaths.values()]}_isIgnored(e,t){if(this.options.atomic&&qo.test(e))return!0;if(!this._userIgnored){let{cwd:i}=this.options,n=this.options.ignored,r=n&&n.map(Pn(i)),a=Rs(r).filter(c=>typeof c===xs&&!ps(c)).map(c=>c+Ss),o=this._getGlobIgnored().map(Pn(i)).concat(r,a);this._userIgnored=Es(o,void 0,ws)}return this._userIgnored([e,t])}_isntIgnored(e,t){return!this._isIgnored(e,t)}_getWatchHelpers(e,t){let i=t||this.options.disableGlobbing||!ps(e)?e:Fo(e),n=this.options.followSymlinks;return new As(e,i,n,this)}_getWatchedDir(e){this._boundRemove||(this._boundRemove=this._remove.bind(this));let t=T.resolve(e);return this._watched.has(t)||this._watched.set(t,new Cs(t,this._boundRemove)),this._watched.get(t)}_hasReadPermissions(e){if(this.options.ignorePermissionErrors)return!0;let i=(e&&Number.parseInt(e.mode,10))&511;return!!(4&Number.parseInt(i.toString(8)[0],10))}_remove(e,t,i){let n=T.join(e,t),r=T.resolve(n);if(i=i??(this._watched.has(n)||this._watched.has(r)),!this._throttle("remove",n,100))return;!i&&!this.options.useFsEvents&&this._watched.size===1&&this.add(e,t,!0),this._getWatchedDir(n).getChildren().forEach(u=>this._remove(n,u));let c=this._getWatchedDir(e),l=c.has(t);c.remove(t),this._symlinkPaths.has(r)&&this._symlinkPaths.delete(r);let h=n;if(this.options.cwd&&(h=T.relative(this.options.cwd,n)),this.options.awaitWriteFinish&&this._pendingWrites.has(h)&&this._pendingWrites.get(h).cancelWait()===yt)return;this._watched.delete(n),this._watched.delete(r);let f=i?Wo:An;l&&!this._isIgnored(n)&&this._emit(f,n),this.options.useFsEvents||this._closePath(n)}_closePath(e){this._closeFile(e);let t=T.dirname(e);this._getWatchedDir(t).remove(T.basename(e))}_closeFile(e){let t=this._closers.get(e);t&&(t.forEach(i=>i()),this._closers.delete(e))}_addPathCloser(e,t){if(!t)return;let i=this._closers.get(e);i||(i=[],this._closers.set(e,i)),i.push(t)}_readdirp(e,t){if(this.closed)return;let i={type:gs,alwaysStat:!0,lstat:!0,...t},n=Do(e,i);return this._streams.add(n),n.once(Uo,()=>{n=void 0}),n.once(Vo,()=>{n&&(this._streams.delete(n),n=void 0)}),n}};Ts.FSWatcher=St;var uc=(s,e)=>{let t=new St(e);return t.add(s),t};Ts.watch=uc});var gc={};Xn(gc,{default:()=>xt});module.exports=Zn(gc);var Tt=require("obsidian");var Os={host:"",port:22,username:"",remotePath:"",privateKeyPath:"~/.ssh/id_rsa",usePassword:!1,password:"",autoSync:!1,syncInterval:5,syncOnSave:!0,debounceDelay:2e3,includeFolders:[],excludePatterns:[".obsidian/workspace*.json",".obsidian/plugins/",".trash/","*.swp","*~",".DS_Store","Thumbs.db"],watchPatterns:["**/*.md","**/*.canvas"],maxFileSize:50,connectionTimeout:30,retryAttempts:3,enableDebugLogs:!1};function Ns(s){let e=[];return(!s.host||s.host.trim()==="")&&e.push("SSH host is required"),(s.port<1||s.port>65535)&&e.push("Port must be between 1 and 65535"),(!s.username||s.username.trim()==="")&&e.push("SSH username is required"),(!s.remotePath||s.remotePath.trim()==="")&&e.push("Remote path is required"),!s.usePassword&&(!s.privateKeyPath||s.privateKeyPath.trim()==="")&&e.push("SSH private key path is required when not using password"),s.syncInterval<1&&e.push("Sync interval must be at least 1 minute"),s.debounceDelay<500&&e.push("Debounce delay must be at least 500ms"),s.maxFileSize<1&&e.push("Max file size must be at least 1 MB"),e}var N=require("obsidian");var me=V(require("fs")),we=V(require("path")),Ds=V(require("os"));var oe=V(require("path")),Hs=V(require("os"));function Q(s){return s.replace(/\\/g,"/")}function de(s){return s.startsWith("~")?oe.join(Hs.homedir(),s.slice(1)):s}function Lt(s,...e){let t=[s,...e].map(i=>i.replace(/^\/+|\/+$/g,"")).filter(i=>i.length>0).join("/");return s.startsWith("/")?`/${t}`:t}function Jn(s,e){let t=Q(s);for(let i of e)if(er(t,i))return!0;return!1}function er(s,e){let t=e.replace(/[.+^${}()|[\]\\]/g,"\\$&").replace(/\*\*/g,"<<<GLOBSTAR>>>").replace(/\*/g,"[^/]*").replace(/<<<GLOBSTAR>>>/g,".*").replace(/\?/g,".");return new RegExp(`^${t}$`).test(s)?s:null}function qe(s,e,t,i){return Jn(s,e)?{exclude:!0,reason:"Matches exclude pattern"}:t&&i&&i>t?{exclude:!0,reason:`File size (${Ot(i)}) exceeds limit`}:{exclude:!1}}function Ot(s){if(s===0)return"0 Bytes";let e=1024,t=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(s)/Math.log(e));return parseFloat((s/Math.pow(e,i)).toFixed(2))+" "+t[i]}function Is(s){let e=oe.dirname(s),t=oe.extname(s),i=oe.basename(s,t),n=new Date().toISOString().replace(/[:.]/g,"-").slice(0,19);return oe.join(e,`${i}_conflict_${n}${t}`)}var Pe=class{static getDefaultKeyPaths(){let e=we.join(Ds.homedir(),".ssh");return[we.join(e,"id_ed25519"),we.join(e,"id_rsa"),we.join(e,"id_ecdsa"),we.join(e,"id_dsa")]}static findExistingKeys(){let e=this.getDefaultKeyPaths(),t=[];for(let i of e){let n=this.validateKey(i);n.exists&&t.push(n)}return t}static validateKey(e){let t=de(e),i={path:t,type:"unknown",exists:!1,isValid:!1};try{if(!me.existsSync(t))return i.error="File does not exist",i;if(i.exists=!0,me.statSync(t).isDirectory())return i.error="Path is a directory, not a file",i;let r=me.readFileSync(t,"utf8");r.includes("-----BEGIN OPENSSH PRIVATE KEY-----")?(i.type=this.detectOpenSSHKeyType(r),i.isValid=!0):r.includes("-----BEGIN RSA PRIVATE KEY-----")?(i.type="rsa",i.isValid=!0):r.includes("-----BEGIN EC PRIVATE KEY-----")?(i.type="ecdsa",i.isValid=!0):r.includes("-----BEGIN DSA PRIVATE KEY-----")?(i.type="dsa",i.isValid=!0):i.error="Unrecognized key format"}catch(n){i.error=`Failed to read key: ${n.message}`}return i}static detectOpenSSHKeyType(e){return e.includes("ssh-ed25519")?"ed25519":e.includes("ssh-rsa")||e.includes("rsa-sha2")?"rsa":e.includes("ecdsa-sha2")?"ecdsa":"unknown"}static loadPrivateKey(e){let t=de(e);return me.readFileSync(t,"utf8")}static isSSHAgentAvailable(){return!!process.env.SSH_AUTH_SOCK}static getSSHAgentSocket(){return process.env.SSH_AUTH_SOCK}};Pe.KEY_SIGNATURES={rsa:"-----BEGIN RSA PRIVATE KEY-----","rsa-openssh":"-----BEGIN OPENSSH PRIVATE KEY-----",ed25519:"-----BEGIN OPENSSH PRIVATE KEY-----",ecdsa:"-----BEGIN EC PRIVATE KEY-----",dsa:"-----BEGIN DSA PRIVATE KEY-----"};var je=class extends N.PluginSettingTab{constructor(e,t){super(e,t),this.plugin=t}display(){let{containerEl:e}=this;e.empty(),e.addClass("ssh-sync-settings"),e.createEl("h1",{text:"SSH Sync Settings"}),this.renderConnectionSection(e),this.renderSyncBehaviorSection(e),this.renderFiltersSection(e),this.renderAdvancedSection(e)}renderConnectionSection(e){if(e.createEl("h2",{text:"Connection"}),new N.Setting(e).setName("SSH Host").setDesc("Hostname or IP address of the remote machine").addText(t=>t.setPlaceholder("192.168.1.100 or hostname").setValue(this.plugin.settings.host).onChange(async i=>{this.plugin.settings.host=i,await this.plugin.saveSettings()})),new N.Setting(e).setName("SSH Port").setDesc("SSH port (default: 22)").addText(t=>t.setPlaceholder("22").setValue(this.plugin.settings.port.toString()).onChange(async i=>{let n=parseInt(i)||22;this.plugin.settings.port=n,await this.plugin.saveSettings()})),new N.Setting(e).setName("Username").setDesc("SSH username for authentication").addText(t=>t.setPlaceholder("username").setValue(this.plugin.settings.username).onChange(async i=>{this.plugin.settings.username=i,await this.plugin.saveSettings()})),new N.Setting(e).setName("Remote Path").setDesc("Absolute path to the vault folder on the remote machine").addText(t=>t.setPlaceholder("/home/user/obsidian-vault").setValue(this.plugin.settings.remotePath).onChange(async i=>{this.plugin.settings.remotePath=i,await this.plugin.saveSettings()})),new N.Setting(e).setName("Use Password Authentication").setDesc("Use password instead of SSH key (less secure)").addToggle(t=>t.setValue(this.plugin.settings.usePassword).onChange(async i=>{this.plugin.settings.usePassword=i,await this.plugin.saveSettings(),this.display()})),this.plugin.settings.usePassword)new N.Setting(e).setName("Password").setDesc("SSH password (stored in settings)").addText(t=>(t.inputEl.type="password",t.setPlaceholder("\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022").setValue(this.plugin.settings.password).onChange(async i=>{this.plugin.settings.password=i,await this.plugin.saveSettings()})));else{new N.Setting(e).setName("Private Key Path").setDesc("Path to your SSH private key").addText(i=>i.setPlaceholder("~/.ssh/id_rsa").setValue(this.plugin.settings.privateKeyPath).onChange(async n=>{this.plugin.settings.privateKeyPath=n,await this.plugin.saveSettings()}));let t=Pe.findExistingKeys();if(t.length>0){let i=e.createDiv({cls:"ssh-sync-key-list"});i.createEl("p",{text:"Detected SSH keys:",cls:"setting-item-description"});for(let n of t)i.createEl("code",{text:`${n.path} (${n.type})`,cls:"ssh-sync-detected-key"}).addEventListener("click",async()=>{this.plugin.settings.privateKeyPath=n.path,await this.plugin.saveSettings(),this.display()})}}new N.Setting(e).setName("Test Connection").setDesc("Verify SSH connection and remote path").addButton(t=>t.setButtonText("Test").setCta().onClick(async()=>{t.setDisabled(!0),t.setButtonText("Testing...");let i=Ns(this.plugin.settings);if(i.length>0){new N.Notice(`Configuration errors:
${i.join(`
`)}`),t.setDisabled(!1),t.setButtonText("Test");return}let n=await this.plugin.testConnection();n.success?new N.Notice("\u2705 "+n.message):new N.Notice("\u274C "+n.message),t.setDisabled(!1),t.setButtonText("Test")}))}renderSyncBehaviorSection(e){e.createEl("h2",{text:"Sync Behavior"}),new N.Setting(e).setName("Sync on Save").setDesc("Automatically sync files when they are saved").addToggle(t=>t.setValue(this.plugin.settings.syncOnSave).onChange(async i=>{this.plugin.settings.syncOnSave=i,await this.plugin.saveSettings()})),new N.Setting(e).setName("Auto Sync").setDesc("Enable scheduled automatic synchronization").addToggle(t=>t.setValue(this.plugin.settings.autoSync).onChange(async i=>{this.plugin.settings.autoSync=i,await this.plugin.saveSettings()})),new N.Setting(e).setName("Sync Interval").setDesc("How often to sync automatically (in minutes)").addSlider(t=>t.setLimits(1,60,1).setValue(this.plugin.settings.syncInterval).setDynamicTooltip().onChange(async i=>{this.plugin.settings.syncInterval=i,await this.plugin.saveSettings()})),new N.Setting(e).setName("Debounce Delay").setDesc("Wait time after file changes before syncing (ms)").addSlider(t=>t.setLimits(500,1e4,500).setValue(this.plugin.settings.debounceDelay).setDynamicTooltip().onChange(async i=>{this.plugin.settings.debounceDelay=i,await this.plugin.saveSettings()}))}renderFiltersSection(e){e.createEl("h2",{text:"File Filters"}),new N.Setting(e).setName("Watch Patterns").setDesc("Glob patterns for files to watch (one per line)").addTextArea(t=>{t.setPlaceholder(`**/*.md
**/*.canvas`).setValue(this.plugin.settings.watchPatterns.join(`
`)).onChange(async i=>{this.plugin.settings.watchPatterns=i.split(`
`).map(n=>n.trim()).filter(n=>n.length>0),await this.plugin.saveSettings()}),t.inputEl.rows=4,t.inputEl.cols=40}),new N.Setting(e).setName("Exclude Patterns").setDesc("Glob patterns for files to exclude from sync (one per line)").addTextArea(t=>{t.setPlaceholder(`.obsidian/workspace*.json
.trash/`).setValue(this.plugin.settings.excludePatterns.join(`
`)).onChange(async i=>{this.plugin.settings.excludePatterns=i.split(`
`).map(n=>n.trim()).filter(n=>n.length>0),await this.plugin.saveSettings()}),t.inputEl.rows=6,t.inputEl.cols=40})}renderAdvancedSection(e){e.createEl("h2",{text:"Advanced"}),new N.Setting(e).setName("Max File Size").setDesc("Maximum file size to sync without confirmation (MB)").addSlider(t=>t.setLimits(1,200,1).setValue(this.plugin.settings.maxFileSize).setDynamicTooltip().onChange(async i=>{this.plugin.settings.maxFileSize=i,await this.plugin.saveSettings()})),new N.Setting(e).setName("Connection Timeout").setDesc("SSH connection timeout (seconds)").addSlider(t=>t.setLimits(5,120,5).setValue(this.plugin.settings.connectionTimeout).setDynamicTooltip().onChange(async i=>{this.plugin.settings.connectionTimeout=i,await this.plugin.saveSettings()})),new N.Setting(e).setName("Retry Attempts").setDesc("Number of retry attempts on failure").addSlider(t=>t.setLimits(0,10,1).setValue(this.plugin.settings.retryAttempts).setDynamicTooltip().onChange(async i=>{this.plugin.settings.retryAttempts=i,await this.plugin.saveSettings()})),new N.Setting(e).setName("Debug Logging").setDesc("Enable verbose debug logs").addToggle(t=>t.setValue(this.plugin.settings.enableDebugLogs).onChange(async i=>{this.plugin.settings.enableDebugLogs=i,await this.plugin.saveSettings()}))}};var _e=require("obsidian"),Bn=require("events"),k=V(require("fs")),ue=V(require("path")),Gn=V(require("crypto"));var Le=(n=>(n[n.DEBUG=0]="DEBUG",n[n.INFO=1]="INFO",n[n.WARN=2]="WARN",n[n.ERROR=3]="ERROR",n))(Le||{}),M={SYNC_STARTED:"ssh-sync:started",SYNC_COMPLETED:"ssh-sync:completed",SYNC_ERROR:"ssh-sync:error",FILE_UPLOADED:"ssh-sync:file-uploaded",FILE_DOWNLOADED:"ssh-sync:file-downloaded",CONFLICT_DETECTED:"ssh-sync:conflict",CONNECTION_CHANGED:"ssh-sync:connection-changed"};var Ze=V(require("fs")),Fs=V(require("path")),Qe=require("child_process");var Xe=class{constructor(e){this.settings=e.settings,this.logger=e.logger}updateSettings(e){this.settings=e}isConnected(){return!0}async connect(){return Promise.resolve()}async disconnect(){return Promise.resolve()}getSSHBaseArgs(){let e=["-p",this.settings.port.toString(),"-o",`ConnectTimeout=${this.settings.connectionTimeout}`,"-o","BatchMode=yes","-o","StrictHostKeyChecking=no"];return!this.settings.usePassword&&this.settings.privateKeyPath&&e.push("-i",de(this.settings.privateKeyPath)),e}getSSHCommandPrefix(){let e=this.getSSHBaseArgs();return this.settings.usePassword?["sshpass","-p",this.settings.password,"ssh",...e]:["ssh",...e]}getRemoteSpec(){return`${this.settings.username}@${this.settings.host}`}async testConnection(){try{let e=this.getSSHCommandPrefix(),t=this.getRemoteSpec(),i=await this.execCommand([...e,t,"echo 'SSH_OK'"]);return i.trim()!=="SSH_OK"?{success:!1,message:`SSH connection failed: ${i}`}:(await this.execCommand([...e,t,`[ -d "${this.settings.remotePath}" ] && echo "DIR_OK" || echo "DIR_ERR"`])).trim()!=="DIR_OK"?{success:!1,message:`Remote path error: ${this.settings.remotePath} is not a directory or doesn't exist.`}:{success:!0,message:"Connection successful! SSH and remote path verified."}}catch(e){return{success:!1,message:`Connection failed: ${e.message}`}}}async listRemoteFiles(e){let t=e||this.settings.remotePath,i=this.getSSHCommandPrefix(),n=this.getRemoteSpec(),r=`find "${t}" -printf "%p;%s;%T@;%y\\n"`;try{let o=(await this.execCommand([...i,n,r])).split(`
`).filter(l=>l.trim().length>0),c=[];for(let l of o){let[h,f,u,S]=l.split(";"),m=h.replace(this.settings.remotePath,"").replace(/^\//,"");m&&c.push({path:h,relativePath:m,size:parseInt(f)||0,mtime:Math.floor(parseFloat(u)*1e3),isDirectory:S==="d"})}return c}catch(a){return this.logger.error("Failed to list remote files",{error:a.message}),this.listRemoteFilesFallback(t)}}async listRemoteFilesFallback(e){let t=this.getSSHCommandPrefix(),i=this.getRemoteSpec();this.logger.info("Falling back to portable file listing");let n=`find "${e}" -type f,d -exec stat --format="%n;%s;%Y;%F" {} +`;try{let a=(await this.execCommand([...t,i,n])).split(`
`).filter(c=>c.trim().length>0),o=[];for(let c of a){let[l,h,f,u]=c.split(";"),S=l.replace(this.settings.remotePath,"").replace(/^\//,"");S&&o.push({path:l,relativePath:S,size:parseInt(h)||0,mtime:parseInt(f)*1e3,isDirectory:u.includes("directory")})}return o}catch(r){throw new Error(`Failed to list remote files even with fallback: ${r.message}`)}}async uploadFile(e,t){let i=t.substring(0,t.lastIndexOf("/"));await this.ensureRemoteDir(i);let n=this.settings.port.toString(),r=`${this.settings.username}@${this.settings.host}:${t}`,a,o;this.settings.usePassword?(a="sshpass",o=["-p",this.settings.password,"scp","-P",n,"-o","StrictHostKeyChecking=no",e,r]):(a="scp",o=["-P",n,"-o","StrictHostKeyChecking=no"],this.settings.privateKeyPath&&o.push("-i",de(this.settings.privateKeyPath)),o.push(e,r)),await this.spawnCommand(a,o),this.logger.debug("File uploaded via scp",{localPath:e,remotePath:t})}async downloadFile(e,t){let i=Fs.dirname(t);Ze.existsSync(i)||Ze.mkdirSync(i,{recursive:!0});let n=this.settings.port.toString(),r=`${this.settings.username}@${this.settings.host}:${e}`,a,o;this.settings.usePassword?(a="sshpass",o=["-p",this.settings.password,"scp","-P",n,"-o","StrictHostKeyChecking=no",r,t]):(a="scp",o=["-P",n,"-o","StrictHostKeyChecking=no"],this.settings.privateKeyPath&&o.push("-i",de(this.settings.privateKeyPath)),o.push(r,t)),await this.spawnCommand(a,o),this.logger.debug("File downloaded via scp",{remotePath:e,localPath:t})}async deleteRemoteFile(e){let t=this.getSSHCommandPrefix(),i=this.getRemoteSpec();await this.execCommand([...t,i,`rm -f "${e}"`]),this.logger.debug("Remote file deleted",{remotePath:e})}async getRemoteFileStat(e){let t=this.getSSHCommandPrefix(),i=this.getRemoteSpec();try{let n=await this.execCommand([...t,i,`stat --format="%n;%s;%Y;%F" "${e}"`]),[r,a,o,c]=n.trim().split(";");return{path:e,relativePath:e.replace(this.settings.remotePath,"").replace(/^\//,""),size:parseInt(a)||0,mtime:parseInt(o)*1e3,isDirectory:c.includes("directory")}}catch{return null}}async ensureRemoteDir(e){let t=this.getSSHCommandPrefix(),i=this.getRemoteSpec();await this.execCommand([...t,i,`mkdir -p "${e}"`])}async execRsync(e,t,i){let n=["-avz","--progress","--delete"];i.dryRun&&n.push("--dry-run");for(let f of this.settings.excludePatterns)n.push(`--exclude=${f}`);let r=["ssh","-p",this.settings.port.toString(),"-o","StrictHostKeyChecking=no"];!this.settings.usePassword&&this.settings.privateKeyPath&&r.push("-i",de(this.settings.privateKeyPath));let a=r.map(f=>`'${f}'`).join(" ");n.push("-e",a);let o=`${this.settings.username}@${this.settings.host}:${this.settings.remotePath}/`,c=Q(e)+"/";i.push?n.push(c,o):n.push(o,c);let l="rsync",h=n;return this.settings.usePassword&&(l="sshpass",h=["-p",this.settings.password,"rsync",...n]),new Promise(f=>{this.logger.debug("Executing rsync",{finalCmd:l,finalArgs:h});let u=(0,Qe.spawn)(l,h),S="";u.stdout.on("data",m=>{S+=m.toString()}),u.stderr.on("data",m=>{S+=m.toString()}),u.on("close",m=>{let _=m===0;_?this.logger.info("rsync completed",{direction:i.push?"push":"pull"}):this.logger.error("rsync failed",{code:m,output:S}),f({success:_,output:S})}),u.on("error",m=>{this.logger.error("rsync error",{error:m.message}),f({success:!1,output:m.message})})})}async execCommand(e){return new Promise((t,i)=>{let[n,...r]=e,a=(0,Qe.spawn)(n,r),o="",c="";a.stdout.on("data",l=>o+=l.toString()),a.stderr.on("data",l=>c+=l.toString()),a.on("close",l=>{l===0?t(o):i(new Error(c||`Command failed with code ${l}`))}),a.on("error",l=>i(l))})}async spawnCommand(e,t){return new Promise((i,n)=>{let r=(0,Qe.spawn)(e,t),a="";r.stderr.on("data",o=>a+=o.toString()),r.on("close",o=>{o===0?i():n(new Error(a||`Command failed with code ${o}`))}),r.on("error",o=>n(o))})}};var Dn=V(In()),Fn=require("events"),$n=V(require("path"));var Et=class extends Fn.EventEmitter{constructor(t,i,n){super();this.watcher=null;this.debounceTimers=new Map;this.pendingChanges=new Map;this.isReady=!1;this.vaultPath=t,this.settings=i,this.logger=n}updateSettings(t){this.settings=t}start(){if(this.watcher){this.logger.debug("File watcher already running");return}let t=this.settings.watchPatterns.map(i=>$n.join(this.vaultPath,i));this.logger.info("Starting file watcher",{patterns:t}),this.watcher=Dn.default.watch(t,{ignored:i=>this.shouldIgnore(i),persistent:!0,ignoreInitial:!0,awaitWriteFinish:{stabilityThreshold:500,pollInterval:100},followSymlinks:!1}),this.watcher.on("ready",()=>{this.isReady=!0,this.logger.info("File watcher ready"),this.emit("ready")}),this.watcher.on("add",i=>this.handleFileEvent("add",i)),this.watcher.on("change",i=>this.handleFileEvent("change",i)),this.watcher.on("unlink",i=>this.handleFileEvent("unlink",i)),this.watcher.on("error",i=>{this.logger.error("File watcher error",{error:i.message}),this.emit("error",i)})}stop(){if(this.watcher){this.watcher.close(),this.watcher=null,this.isReady=!1;for(let t of this.debounceTimers.values())clearTimeout(t);this.debounceTimers.clear(),this.pendingChanges.clear(),this.logger.info("File watcher stopped")}}shouldIgnore(t){let n=Q(t).replace(Q(this.vaultPath)+"/","");if(n.startsWith(".obsidian/")&&!n.startsWith(".obsidian/snippets/")&&!n.startsWith(".obsidian/themes/")||n.startsWith(".trash/"))return!0;let{exclude:r}=qe(n,this.settings.excludePatterns);return r}handleFileEvent(t,i){if(!this.isReady)return;let r=Q(i).replace(Q(this.vaultPath)+"/","");this.logger.debug("File event detected",{type:t,relativePath:r});let a={type:t,path:i,relativePath:r},o=this.debounceTimers.get(r);o&&clearTimeout(o),this.pendingChanges.set(r,a);let c=setTimeout(()=>{let l=this.pendingChanges.get(r);l&&(this.pendingChanges.delete(r),this.debounceTimers.delete(r),this.emit("fileChange",l),this.logger.debug("Emitting file change",{event:l}))},this.settings.debounceDelay);this.debounceTimers.set(r,c)}getPendingChanges(){return Array.from(this.pendingChanges.values())}flushPendingChanges(){let t=this.getPendingChanges();for(let i of this.debounceTimers.values())clearTimeout(i);return this.debounceTimers.clear(),this.pendingChanges.clear(),t}};var kn=require("obsidian"),pe=V(require("fs")),Ps=V(require("path"));var _t=class{constructor(e,t){this.app=e,this.logger=t,this.vaultPath=this.app.vault.adapter.basePath}detectConflict(e,t,i){let n=e.mtime>i,r=t.mtime>i;return n&&r}async resolveConflict(e,t,i){let n=Is(e.path),r=n.replace(this.vaultPath+"/","");this.logger.warn("Conflict detected, creating conflict copy",{original:e.relativePath,conflict:r});try{pe.writeFileSync(n,i,"utf8")}catch(o){throw this.logger.error("Failed to create conflict file",{error:o.message}),o}let a={localFile:e,remoteFile:t,conflictPath:r,resolvedAt:Date.now()};return new kn.Notice(`SSH Sync: Conflict detected!
File: ${e.relativePath}
Remote version saved as: ${r}`,1e4),a}async autoMergeIfPossible(e,t){return e.mtime>t.mtime?{canAutoMerge:!0,winner:"local"}:t.size===0?{canAutoMerge:!0,winner:"local"}:e.size===t.size&&Math.abs(e.mtime-t.mtime)<1e3?{canAutoMerge:!0,winner:"local"}:{canAutoMerge:!1}}listConflictFiles(){let e=[],t=i=>{try{let n=pe.readdirSync(i);for(let r of n){let a=Ps.join(i,r);if(pe.statSync(a).isDirectory())r.startsWith(".")||t(a);else if(r.includes("_conflict_")){let c=Q(a).replace(Q(this.vaultPath)+"/","");e.push(c)}}}catch(n){this.logger.error("Error scanning for conflicts",{dir:i,error:n.message})}};return t(this.vaultPath),e}async deleteConflictFile(e){let t=Ps.join(this.vaultPath,e);try{pe.unlinkSync(t),this.logger.info("Conflict file deleted",{path:e})}catch(i){throw this.logger.error("Failed to delete conflict file",{path:e,error:i.message}),i}}};var Mn=".obsidian/plugins/obsidian-ssh-sync/sync-state.json",wt=class extends Bn.EventEmitter{constructor(t,i,n){super();this.status="disconnected";this.syncInProgress=!1;this.scheduledSyncTimer=null;this.app=t,this.settings=i,this.logger=n,this.vaultPath=this.app.vault.adapter.basePath,this.sshClient=new Xe({settings:i,logger:n}),this.fileWatcher=new Et(this.vaultPath,i,n),this.conflictResolver=new _t(t,n),this.syncState=this.loadSyncState(),this.setupEventHandlers()}setupEventHandlers(){this.fileWatcher.on("fileChange",async t=>{this.settings.syncOnSave&&!this.syncInProgress&&(this.logger.debug("Auto-sync triggered by file change",{file:t.relativePath}),await this.syncSingleFile(t))}),this.fileWatcher.on("error",t=>{this.setStatus("error"),this.logger.error("File watcher error",{error:t.message})})}updateSettings(t){this.settings=t,this.sshClient.updateSettings(t),this.fileWatcher.updateSettings(t),this.restartScheduledSync()}async start(){this.logger.info("Starting sync engine"),this.fileWatcher.start(),this.settings.autoSync&&this.startScheduledSync(),this.setStatus("idle")}async stop(){this.logger.info("Stopping sync engine"),this.fileWatcher.stop(),this.stopScheduledSync(),await this.sshClient.disconnect(),this.setStatus("disconnected")}startScheduledSync(){if(this.scheduledSyncTimer)return;let t=this.settings.syncInterval*60*1e3;this.scheduledSyncTimer=setInterval(async()=>{this.syncInProgress||(this.logger.debug("Scheduled sync triggered"),await this.syncAll())},t),this.logger.info("Scheduled sync started",{intervalMinutes:this.settings.syncInterval})}stopScheduledSync(){this.scheduledSyncTimer&&(clearInterval(this.scheduledSyncTimer),this.scheduledSyncTimer=null,this.logger.debug("Scheduled sync stopped"))}restartScheduledSync(){this.stopScheduledSync(),this.settings.autoSync&&this.startScheduledSync()}setStatus(t){this.status=t,this.emit(M.CONNECTION_CHANGED,t)}getStatus(){return this.status}async testConnection(){return this.sshClient.testConnection()}async syncAll(){if(this.syncInProgress){this.logger.warn("Sync already in progress, skipping");return}this.syncInProgress=!0,this.setStatus("syncing"),this.emit(M.SYNC_STARTED);try{await this.sshClient.connect();let t=await this.getLocalFiles(),i=await this.sshClient.listRemoteFiles();this.logger.info("Starting full sync",{localFiles:t.length,remoteFiles:i.length});let n=await this.calculateSyncOperations(t,i);await this.executeSyncOperations(n),this.syncState.lastSyncTime=Date.now(),this.saveSyncState(),this.setStatus("idle"),this.emit(M.SYNC_COMPLETED),new _e.Notice(`SSH Sync: Completed! ${n.length} file(s) synchronized.`),this.logger.info("Full sync completed",{operations:n.length})}catch(t){let i=t;this.setStatus("error"),this.emit(M.SYNC_ERROR,i),this.logger.error("Sync failed",{error:i.message}),new _e.Notice(`SSH Sync Error: ${i.message}`)}finally{this.syncInProgress=!1}}async syncSingleFile(t){if(!this.syncInProgress){this.syncInProgress=!0,this.setStatus("syncing");try{await this.sshClient.connect();let i=t.path,n=Lt(this.settings.remotePath,t.relativePath);if(t.type==="unlink")await this.sshClient.deleteRemoteFile(n),this.logger.info("File deleted remotely",{file:t.relativePath});else{let r=k.statSync(i),a=this.settings.maxFileSize*1024*1024;if(r.size>a){this.logger.warn("File too large for auto-sync",{file:t.relativePath,size:Ot(r.size)});return}let o=await this.sshClient.getRemoteFileStat(n);if(o&&this.conflictResolver.detectConflict({path:i,relativePath:t.relativePath,size:r.size,mtime:r.mtimeMs,isDirectory:!1},o,this.syncState.lastSyncTime)){let l=ue.join(this.vaultPath,".obsidian","temp_conflict");await this.sshClient.downloadFile(n,l);let h=k.readFileSync(l,"utf8");k.unlinkSync(l),await this.conflictResolver.resolveConflict({path:i,relativePath:t.relativePath,size:r.size,mtime:r.mtimeMs,isDirectory:!1},o,h)}await this.sshClient.uploadFile(i,n),this.emit(M.FILE_UPLOADED,t.relativePath),this.logger.info("File uploaded",{file:t.relativePath})}this.updateFileHash(t.relativePath,i),this.setStatus("idle")}catch(i){let n=i;this.setStatus("error"),this.logger.error("Single file sync failed",{file:t.relativePath,error:n.message})}finally{this.syncInProgress=!1}}}async forcePull(){if(this.syncInProgress){this.logger.warn("Sync already in progress");return}this.syncInProgress=!0,this.setStatus("syncing"),this.emit(M.SYNC_STARTED);try{await this.sshClient.connect();let t=await this.sshClient.execRsync(this.vaultPath,"",{push:!1});if(t.success)this.syncState.lastSyncTime=Date.now(),this.saveSyncState(),new _e.Notice("SSH Sync: Force pull completed!"),this.logger.info("Force pull completed");else throw new Error(t.output);this.setStatus("idle"),this.emit(M.SYNC_COMPLETED)}catch(t){let i=t;this.setStatus("error"),this.emit(M.SYNC_ERROR,i),this.logger.error("Force pull failed",{error:i.message}),new _e.Notice(`SSH Sync Error: ${i.message}`)}finally{this.syncInProgress=!1}}async forcePush(){if(this.syncInProgress){this.logger.warn("Sync already in progress");return}this.syncInProgress=!0,this.setStatus("syncing"),this.emit(M.SYNC_STARTED);try{await this.sshClient.connect();let t=await this.sshClient.execRsync(this.vaultPath,"",{push:!0});if(t.success)this.syncState.lastSyncTime=Date.now(),this.saveSyncState(),new _e.Notice("SSH Sync: Force push completed!"),this.logger.info("Force push completed");else throw new Error(t.output);this.setStatus("idle"),this.emit(M.SYNC_COMPLETED)}catch(t){let i=t;this.setStatus("error"),this.emit(M.SYNC_ERROR,i),this.logger.error("Force push failed",{error:i.message}),new _e.Notice(`SSH Sync Error: ${i.message}`)}finally{this.syncInProgress=!1}}async getLocalFiles(){let t=[],i=this.settings.maxFileSize*1024*1024,n=r=>{try{let a=k.readdirSync(r);for(let o of a){let c=ue.join(r,o),l=Q(c).replace(Q(this.vaultPath)+"/",""),{exclude:h}=qe(l,this.settings.excludePatterns);if(h)continue;let f=k.statSync(c);f.isDirectory()?n(c):t.push({path:c,relativePath:l,size:f.size,mtime:f.mtimeMs,isDirectory:!1})}}catch(a){this.logger.error("Error reading directory",{dir:r,error:a.message})}};return n(this.vaultPath),t}async calculateSyncOperations(t,i){let n=[],r=new Map(t.map(o=>[o.relativePath,o])),a=new Map(i.map(o=>[o.relativePath,o]));for(let o of t){let c=a.get(o.relativePath);if(!c)n.push({file:o,direction:"local_to_remote",status:"pending",timestamp:Date.now()});else if(o.mtime>c.mtime+1e3){let l=this.conflictResolver.detectConflict(o,c,this.syncState.lastSyncTime);n.push({file:o,direction:l?"conflict":"local_to_remote",status:"pending",timestamp:Date.now()})}}for(let o of i){let c=r.get(o.relativePath);c?o.mtime>c.mtime+1e3&&(n.find(h=>h.file.relativePath===o.relativePath)||n.push({file:o,direction:"remote_to_local",status:"pending",timestamp:Date.now()})):n.push({file:o,direction:"remote_to_local",status:"pending",timestamp:Date.now()})}return n}async executeSyncOperations(t){for(let i of t){i.status="in_progress";try{let n=Lt(this.settings.remotePath,i.file.relativePath),r=ue.join(this.vaultPath,i.file.relativePath);switch(i.direction){case"local_to_remote":await this.sshClient.uploadFile(r,n),this.emit(M.FILE_UPLOADED,i.file.relativePath);break;case"remote_to_local":await this.sshClient.downloadFile(n,r),this.emit(M.FILE_DOWNLOADED,i.file.relativePath);break;case"conflict":let a=ue.join(this.vaultPath,".obsidian","temp_conflict");await this.sshClient.downloadFile(n,a);let o=k.readFileSync(a,"utf8");k.unlinkSync(a);let c=await this.sshClient.getRemoteFileStat(n);c&&await this.conflictResolver.resolveConflict(i.file,c,o),await this.sshClient.uploadFile(r,n),this.emit(M.CONFLICT_DETECTED,i.file.relativePath);break}i.status="completed",this.updateFileHash(i.file.relativePath,r)}catch(n){i.status="failed",i.error=n.message,this.logger.error("Operation failed",{file:i.file.relativePath,direction:i.direction,error:i.error})}}}updateFileHash(t,i){try{if(k.existsSync(i)){let n=k.readFileSync(i),r=Gn.createHash("md5").update(n).digest("hex");this.syncState.fileHashes[t]=r}}catch(n){this.logger.error("Failed to update file hash",{path:t,error:n.message})}}loadSyncState(){let t=ue.join(this.vaultPath,Mn);try{if(k.existsSync(t)){let i=k.readFileSync(t,"utf8");return JSON.parse(i)}}catch(i){this.logger.warn("Failed to load sync state",{error:i.message})}return{lastSyncTime:0,fileHashes:{},pendingOperations:[],conflicts:[]}}saveSyncState(){let t=ue.join(this.vaultPath,Mn);try{let i=ue.dirname(t);k.existsSync(i)||k.mkdirSync(i,{recursive:!0}),k.writeFileSync(t,JSON.stringify(this.syncState,null,2),"utf8")}catch(i){this.logger.error("Failed to save sync state",{error:i.message})}}getLastSyncTime(){return this.syncState.lastSyncTime}getConflicts(){return this.conflictResolver.listConflictFiles()}};var Wn=require("obsidian"),Rt=V(require("fs")),Kn=V(require("path")),fc=1e3,dc="ssh-sync.log",vt=class{constructor(e,t=!1){this.app=e;this.entries=[];this.debugEnabled=t;let i=this.app.vault.adapter.basePath;this.logFilePath=Kn.join(i,".obsidian","plugins","obsidian-ssh-sync",dc)}setDebugEnabled(e){this.debugEnabled=e}debug(e,t){this.debugEnabled&&this.log(0,e,t)}info(e,t){this.log(1,e,t)}warn(e,t){this.log(2,e,t)}error(e,t){this.log(3,e,t)}log(e,t,i){let n={timestamp:Date.now(),level:e,message:t,context:i};if(this.entries.push(n),this.entries.length>fc&&this.entries.shift(),this.writeToFile(n),e>=1||this.debugEnabled){let r=this.getLevelPrefix(e);console.log(`[SSH Sync] ${r} ${t}`,i||"")}}getLevelPrefix(e){switch(e){case 0:return"[DEBUG]";case 1:return"[INFO]";case 2:return"[WARN]";case 3:return"[ERROR]";default:return"[LOG]"}}writeToFile(e){try{let t=new Date(e.timestamp).toISOString(),i=this.getLevelPrefix(e.level),n=e.context?` ${JSON.stringify(e.context)}`:"",r=`${t} ${i} ${e.message}${n}
`;Rt.appendFileSync(this.logFilePath,r,"utf8")}catch{}}getEntries(e,t){let i=e!==void 0?this.entries.filter(n=>n.level>=e):this.entries;return t&&t>0&&(i=i.slice(-t)),i}getEntriesFormatted(e,t){return this.getEntries(e,t).map(i=>{let n=new Date(i.timestamp).toLocaleTimeString(),r=this.getLevelPrefix(i.level),a=i.context?` ${JSON.stringify(i.context)}`:"";return`${n} ${r} ${i.message}${a}`})}clear(){this.entries=[];try{Rt.writeFileSync(this.logFilePath,"","utf8")}catch{}}async exportToFile(){let e=(0,Wn.normalizePath)(`ssh-sync-export-${Date.now()}.log`),t=this.getEntriesFormatted().join(`
`);return await this.app.vault.create(e,t),e}};var Ct=class{constructor(e,t){this.STATUS_ICONS={idle:"\u{1F535}",syncing:"\u{1F7E1}",error:"\u{1F534}",disconnected:"\u26AA"};this.STATUS_TEXT={idle:"Synced",syncing:"Syncing...",error:"Error",disconnected:"Disconnected"};this.plugin=e,this.syncEngine=t,this.statusBarItem=this.plugin.addStatusBarItem(),this.statusBarItem.addClass("ssh-sync-status-bar"),this.setupEventListeners(),this.update("disconnected"),this.statusBarItem.onClickEvent(()=>{this.showQuickStatus()})}setupEventListeners(){this.syncEngine.on(M.CONNECTION_CHANGED,e=>{this.update(e)}),this.syncEngine.on(M.SYNC_STARTED,()=>{this.update("syncing")}),this.syncEngine.on(M.SYNC_COMPLETED,()=>{this.update("idle")}),this.syncEngine.on(M.SYNC_ERROR,()=>{this.update("error")})}update(e){let t=this.STATUS_ICONS[e],i=this.STATUS_TEXT[e];this.statusBarItem.empty(),this.statusBarItem.createSpan({text:`${t} SSH Sync: ${i}`}),this.statusBarItem.setAttribute("aria-label",`SSH Sync Status: ${i}`),this.statusBarItem.setAttribute("data-status",e)}showQuickStatus(){let e=this.syncEngine.getLastSyncTime(),t=this.syncEngine.getStatus(),i=this.syncEngine.getConflicts(),n=`Status: ${this.STATUS_TEXT[t]}
`;if(e>0){let a=new Date(e);n+=`Last sync: ${a.toLocaleString()}
`}else n+=`Last sync: Never
`;i.length>0&&(n+=`Conflicts: ${i.length} file(s)`);let r=this.statusBarItem.createDiv({cls:"ssh-sync-tooltip"});r.setText(n),setTimeout(()=>r.remove(),3e3)}destroy(){this.statusBarItem.remove()}};var xe=require("obsidian"),At=class extends xe.Modal{constructor(e,t,i){super(e),this.syncEngine=t,this.logger=i}onOpen(){let{contentEl:e}=this;e.empty(),e.addClass("ssh-sync-modal"),e.createEl("h2",{text:"SSH Sync"});let t=e.createDiv({cls:"ssh-sync-status-container"});this.renderStatus(t);let i=e.createDiv({cls:"ssh-sync-actions"});this.renderActions(i);let n=e.createDiv({cls:"ssh-sync-conflicts"});this.renderConflicts(n)}renderStatus(e){let t=this.syncEngine.getStatus(),i=this.syncEngine.getLastSyncTime();if(e.createEl("p",{text:`Status: ${t}`,cls:`ssh-sync-status-${t}`}),i>0){let n=new Date(i);e.createEl("p",{text:`Last synchronized: ${n.toLocaleString()}`,cls:"ssh-sync-last-sync"})}else e.createEl("p",{text:"Never synchronized",cls:"ssh-sync-last-sync"})}renderActions(e){new xe.Setting(e).setName("Sync Now").setDesc("Perform a full bidirectional sync").addButton(t=>t.setButtonText("Sync").setCta().onClick(async()=>{this.close(),await this.syncEngine.syncAll()})),new xe.Setting(e).setName("Force Pull").setDesc("Download all files from remote (overwrites local)").addButton(t=>t.setButtonText("Pull").setWarning().onClick(async()=>{this.close(),await this.syncEngine.forcePull()})),new xe.Setting(e).setName("Force Push").setDesc("Upload all files to remote (overwrites remote)").addButton(t=>t.setButtonText("Push").setWarning().onClick(async()=>{this.close(),await this.syncEngine.forcePush()}))}renderConflicts(e){let t=this.syncEngine.getConflicts();if(t.length===0)return;e.createEl("h3",{text:`Conflicts (${t.length})`});let i=e.createEl("ul",{cls:"ssh-sync-conflict-list"});for(let n of t.slice(0,10))i.createEl("li").createEl("code",{text:n});t.length>10&&e.createEl("p",{text:`...and ${t.length-10} more`,cls:"ssh-sync-more-conflicts"})}onClose(){let{contentEl:e}=this;e.empty()}};var We=require("obsidian");var Te="ssh-sync-log-view",bt=class extends We.ItemView{constructor(t,i){super(t);this.container=null;this.logContainer=null;this.currentFilter=0;this.autoScroll=!0;this.logger=i}getViewType(){return Te}getDisplayText(){return"SSH Sync Logs"}getIcon(){return"file-text"}async onOpen(){this.container=this.containerEl.children[1],this.container.empty(),this.container.addClass("ssh-sync-log-view"),this.renderToolbar(),this.renderLogContainer(),this.refreshLogs()}renderToolbar(){let t=this.container.createDiv({cls:"ssh-sync-log-toolbar"}),i=t.createEl("select",{cls:"ssh-sync-log-filter"}),n=[{value:0,label:"All (Debug)"},{value:1,label:"Info"},{value:2,label:"Warnings"},{value:3,label:"Errors"}];for(let h of n){let f=i.createEl("option",{value:h.value.toString(),text:h.label});h.value===this.currentFilter&&(f.selected=!0)}i.addEventListener("change",()=>{this.currentFilter=parseInt(i.value),this.refreshLogs()}),t.createEl("button",{text:"Refresh",cls:"ssh-sync-log-btn"}).addEventListener("click",()=>this.refreshLogs()),t.createEl("button",{text:"Clear",cls:"ssh-sync-log-btn"}).addEventListener("click",()=>{this.logger.clear(),this.refreshLogs(),new We.Notice("Logs cleared")}),t.createEl("button",{text:"Export",cls:"ssh-sync-log-btn"}).addEventListener("click",async()=>{let h=await this.logger.exportToFile();new We.Notice(`Logs exported to ${h}`)});let c=t.createEl("label",{cls:"ssh-sync-log-autoscroll"}),l=c.createEl("input",{type:"checkbox"});l.checked=this.autoScroll,c.appendText(" Auto-scroll"),l.addEventListener("change",()=>{this.autoScroll=l.checked})}renderLogContainer(){this.logContainer=this.container.createDiv({cls:"ssh-sync-log-container"})}refreshLogs(){if(!this.logContainer)return;this.logContainer.empty();let t=this.logger.getEntries(this.currentFilter,500);if(t.length===0){this.logContainer.createEl("p",{text:"No log entries",cls:"ssh-sync-log-empty"});return}for(let i of t)this.renderLogEntry(i);this.autoScroll&&(this.logContainer.scrollTop=this.logContainer.scrollHeight)}renderLogEntry(t){let i=this.logContainer.createDiv({cls:`ssh-sync-log-entry ssh-sync-log-${Le[t.level].toLowerCase()}`}),n=new Date(t.timestamp).toLocaleTimeString();i.createSpan({text:n,cls:"ssh-sync-log-time"});let r=i.createSpan({text:Le[t.level],cls:"ssh-sync-log-level"});if(i.createSpan({text:t.message,cls:"ssh-sync-log-message"}),t.context){let a=i.createEl("code",{text:JSON.stringify(t.context),cls:"ssh-sync-log-context"})}}async onClose(){this.container?.empty()}};var pc=`<svg viewBox="0 0 100 100" fill="none" stroke="currentColor" stroke-width="8" stroke-linecap="round" stroke-linejoin="round">
  <path d="M10 50 A40 40 0 0 1 90 50"/>
  <path d="M90 50 A40 40 0 0 1 10 50"/>
  <polyline points="75,35 90,50 75,65"/>
  <polyline points="25,35 10,50 25,65"/>
</svg>`,xt=class extends Tt.Plugin{async onload(){console.log("Loading SSH Sync plugin"),await this.loadSettings(),this.logger=new vt(this.app,this.settings.enableDebugLogs),this.syncEngine=new wt(this.app,this.settings,this.logger),(0,Tt.addIcon)("ssh-sync",pc),this.addSettingTab(new je(this.app,this)),this.statusBar=new Ct(this,this.syncEngine),this.registerView(Te,e=>new bt(e,this.logger)),this.addRibbonIcon("ssh-sync","SSH Sync: Sync Now",async()=>{await this.syncEngine.syncAll()}),this.addCommand({id:"ssh-sync-now",name:"Sync Now",callback:async()=>{await this.syncEngine.syncAll()}}),this.addCommand({id:"ssh-sync-force-pull",name:"Force Pull (Remote \u2192 Local)",callback:async()=>{await this.syncEngine.forcePull()}}),this.addCommand({id:"ssh-sync-force-push",name:"Force Push (Local \u2192 Remote)",callback:async()=>{await this.syncEngine.forcePush()}}),this.addCommand({id:"ssh-sync-open-modal",name:"Open Sync Panel",callback:()=>{new At(this.app,this.syncEngine,this.logger).open()}}),this.addCommand({id:"ssh-sync-view-logs",name:"View Logs",callback:async()=>{await this.activateLogView()}}),this.addCommand({id:"ssh-sync-open-settings",name:"Open Settings",callback:()=>{this.app.setting.open(),this.app.setting.openTabById("obsidian-ssh-sync")}}),await this.syncEngine.start(),this.logger.info("SSH Sync plugin loaded")}async onunload(){console.log("Unloading SSH Sync plugin"),await this.syncEngine.stop(),this.statusBar.destroy(),this.app.workspace.detachLeavesOfType(Te),this.logger.info("SSH Sync plugin unloaded")}async loadSettings(){this.settings=Object.assign({},Os,await this.loadData())}async saveSettings(){await this.saveData(this.settings),this.syncEngine?.updateSettings(this.settings),this.logger?.setDebugEnabled(this.settings.enableDebugLogs)}async testConnection(){return this.syncEngine.testConnection()}async activateLogView(){let{workspace:e}=this.app,t=null,i=e.getLeavesOfType(Te);i.length>0?t=i[0]:(t=e.getRightLeaf(!1),t&&await t.setViewState({type:Te,active:!0})),t&&e.revealLeaf(t)}};
/*! Bundled license information:

normalize-path/index.js:
  (*!
   * normalize-path <https://github.com/jonschlinkert/normalize-path>
   *
   * Copyright (c) 2014-2018, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-extglob/index.js:
  (*!
   * is-extglob <https://github.com/jonschlinkert/is-extglob>
   *
   * Copyright (c) 2014-2016, Jon Schlinkert.
   * Licensed under the MIT License.
   *)

is-glob/index.js:
  (*!
   * is-glob <https://github.com/jonschlinkert/is-glob>
   *
   * Copyright (c) 2014-2017, Jon Schlinkert.
   * Released under the MIT License.
   *)

is-number/index.js:
  (*!
   * is-number <https://github.com/jonschlinkert/is-number>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

to-regex-range/index.js:
  (*!
   * to-regex-range <https://github.com/micromatch/to-regex-range>
   *
   * Copyright (c) 2015-present, Jon Schlinkert.
   * Released under the MIT License.
   *)

fill-range/index.js:
  (*!
   * fill-range <https://github.com/jonschlinkert/fill-range>
   *
   * Copyright (c) 2014-present, Jon Schlinkert.
   * Licensed under the MIT License.
   *)
*/
